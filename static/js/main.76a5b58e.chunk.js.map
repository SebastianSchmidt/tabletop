{"version":3,"sources":["token/types.ts","token/state.ts","token/BaseToken.tsx","token/DraggableToken.tsx","token/DraggableTokenPreview.tsx","field/index.ts","panel/state.ts","forms/use-input.ts","forms/TextField.tsx","forms/SelectField.tsx","panel/Panel.tsx","panel/PanelCategory.tsx","panel/FieldPanel.tsx","panel/TokenSymbolField.tsx","panel/TokenColorSelection.tsx","panel/TokenDirectionSelection.tsx","panel/TokenPanel.tsx","panel/PanelContainer.tsx","app/Layout.tsx","app/store.ts","app/App.tsx","forms/Forms.module.css","token/BaseToken.module.css","field/state.ts","field/Cell.module.css","dnd/CustomDragLayer.tsx","dnd/DndProvider.tsx","dnd/use-disable-preview.ts","shared/text.ts","app/Layout.module.css","token/DraggableToken.module.css","field/Field.module.css","panel/PanelCategory.module.css","field/CellToken.tsx","field/Cell.tsx","field/Grid.tsx","field/Field.tsx","dnd/CustomDragLayer.module.css","field/Grid.module.css","panel/Panel.module.css","panel/PanelContainer.module.css","index.tsx"],"names":["Direction","NAME","initialState","nextTokenId","ids","entities","selectedTokenId","undefined","state","createSlice","name","reducers","createToken","action","id","token","payload","push","updateToken","toggleTokenDirection","direction","None","deleteToken","index","indexOf","splice","selectToken","deselectToken","findTokenById","getSelectedTokenId","isTokenSelected","actions","BaseToken","size","onTokenClick","onDirectionClick","circleRef","containerClassName","circleClassName","selected","useSelector","symbol","color","onCircleClick","useCallback","event","stopPropagation","useCircleClick","onNorthClick","useDirectionClick","North","onSouthClick","South","onWestClick","West","onEastClick","East","colors","saturate","chroma","get","backgroundColor","borderColor","darken","hex","textColor","getTextColor","generateColors","containerStyle","width","height","generateContainerStyle","circleStyle","generateCircleStyle","northStyle","borderWidth","generateBorderWidth","top","left","generatePosition","borderLeftWidth","borderRightWidth","borderBottomWidth","borderBottomColor","generateNorthStyle","southStyle","bottom","borderTopWidth","borderTopColor","generateSouthStyle","westStyle","borderRightColor","generateWestStyle","eastStyle","right","borderLeftColor","generateEastStyle","containerClasses","classNames","styles","container","circleClasses","circle","className","style","ref","onClick","DirectionNode","currentDirection","north","south","west","east","current","TOKEN_DND_TYPE","DraggableToken","props","item","useDrag","type","collect","monitor","dragging","isDragging","drag","preview","useDisablePreview","DraggableTokenPreview","offset","diff","x","y","transform","generateStyle","useInput","initialValue","listener","useState","value","setValue","useEffect","onChange","target","TextField","label","max","onFocus","changeHandler","length","useChangeHandler","bind","element","input","maxLength","SelectField","options","currentValue","optionsNormalized","useMemo","map","transformOption","useOptions","selectStyle","option","find","getSelectStyle","useSelectStyle","select","generateOption","Panel","title","children","PanelCategory","FieldPanel","Dimensions","dispatch","useDispatch","columns","getColumns","rows","getRows","columnsChanged","updateFieldDimensions","rowsChanged","DimensionSelect","range","MIN_DIMENSIONS","MAX_DIMENSIONS","TokenSymbolField","createColor","normalizeColor","toLowerCase","TokenColorSelection","directions","TokenDirectionSelection","TokenPanel","PanelContainer","Layout","field","tokenPanel","store","configureStore","reducer","tokens","panel","selector","equalityFn","useSelectorRaw","useDispatchRaw","App","moveToken","module","exports","cells","createCell","normalizeDimension","columnsDiff","increase","columnsStart","columnsEnd","growColumns","decrease","tokenId","console","log","shrinkColumns","Math","abs","rowsDiff","rowsStart","rowsEnd","growRows","shrinkRows","cell","min","findCellByCoordinates","column","CustomDragLayer","useDragLayer","getItem","itemType","getItemType","currentOffset","getSourceClientOffset","renderPreview","layer","DndProvider","backend","HTML5Backend","empty","Image","captureDraggingState","src","BLACK_TEXT","WHITE_TEXT","contrast","CellToken","useTokenClickHandler","useDirectionClickHandler","position","Cell","firstRow","lastColumn","useDrop","accept","canDrop","drop","isOver","useDroppable","droppable","cellSize","Grid","generateGridStyle","generateCells","grid","Field","gridWrapper","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.76a5b58e.chunk.js","sourcesContent":["export enum Direction {\n    North = 'north',\n    South = 'south',\n    West = 'west',\n    East = 'east',\n    None = 'none'\n}\n\nexport interface Token {\n    id: string\n    color: string\n    symbol: string\n    direction: Direction\n}\n\nexport interface TokenCreate {\n    color: string\n    symbol: string\n    direction: Direction\n}\n\nexport interface TokenUpdate {\n    id: string\n    color?: string\n    symbol?: string\n    direction?: Direction\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { RootState } from '../app'\nimport { Token, TokenCreate, TokenUpdate, Direction } from './types'\n\nconst NAME = 'tokens'\n\ninterface State {\n    nextTokenId: number\n    ids: string[]\n    entities: { [id: string]: Token }\n    selectedTokenId?: string\n}\n\nconst initialState: State = {\n    nextTokenId: 0,\n    ids: [],\n    entities: {},\n    selectedTokenId: undefined,\n}\n\nexport const state = createSlice({\n    name: NAME,\n    initialState,\n    reducers: {\n\n        createToken(state, action: PayloadAction<TokenCreate>) {\n            const id = (state.nextTokenId++) + ''\n            const token = { id, ...action.payload }\n            state.ids.push(id)\n            state.entities[id] = token\n        },\n\n        updateToken(state, action: PayloadAction<TokenUpdate>) {\n            const id = action.payload.id\n            const token = state.entities[id]\n\n            if (token) {\n                state.entities[id] = {\n                    ...token,\n                    ...action.payload\n                }\n            }\n        },\n\n        toggleTokenDirection(state, action: PayloadAction<{ id: string, direction: Direction }>) {\n            const { id, direction } = action.payload\n            const token = state.entities[id]\n\n            if (!token) {\n                return\n            }\n\n            if (token.direction !== direction) {\n                token.direction = direction\n            } else {\n                token.direction = Direction.None\n            }\n        },\n\n        deleteToken(state, action: PayloadAction<{ id: string }>) {\n            const { id } = action.payload\n            const index = state.ids.indexOf(id)\n\n            if (index > -1) {\n                state.ids.splice(index, 1)\n                delete state.entities[id]\n            }\n        },\n\n        selectToken(state, action: PayloadAction<{ id: string }>) {\n            const { id } = action.payload\n\n            if (state.entities[id]) {\n                state.selectedTokenId = id\n            }\n        },\n\n        deselectToken(state) {\n            state.selectedTokenId = undefined\n        }\n\n    }\n})\n\nexport const getTokenIds = (state: RootState) => state[NAME].ids\nexport const findTokenById = (state: RootState, id: string): Token | undefined => state[NAME].entities[id]\nexport const getSelectedTokenId = (state: RootState) => state[NAME].selectedTokenId\nexport const isTokenSelected = (state: RootState, id: string) => state[NAME].selectedTokenId === id\n\nexport const {\n    createToken,\n    updateToken,\n    toggleTokenDirection,\n    deleteToken,\n    selectToken,\n    deselectToken\n} = state.actions\n","import { useCallback, MouseEvent } from 'react'\nimport chroma from 'chroma-js'\nimport classNames from 'classnames'\nimport { useSelector } from '../app'\nimport { getTextColor } from '../shared'\nimport { findTokenById, getSelectedTokenId } from './state'\nimport { Direction } from './types'\nimport styles from './BaseToken.module.css'\n\ntype Props = {\n    id: string\n    size: number\n    onTokenClick?: (id: string) => void\n    onDirectionClick?: (id: string, direction: Direction) => void\n    circleRef?: any\n    containerClassName?: string\n    circleClassName?: string\n}\n\ntype DirectionProps = {\n    direction: Direction\n    currentDirection: Direction\n    onClick: (event: MouseEvent) => void\n    className: string\n    style: any\n}\n\nexport function BaseToken({\n    id,\n    size,\n    onTokenClick,\n    onDirectionClick,\n    circleRef,\n    containerClassName,\n    circleClassName\n}: Props) {\n    // State\n    const selected = useSelector(state => getSelectedTokenId(state) === id)\n    const token = useSelector(state => findTokenById(state, id))\n    const symbol = token ? token.symbol : ''\n    const color = token ? token.color : '#ffffff'\n    const direction = token ? token.direction : Direction.None\n\n    // Event handlers\n    const onCircleClick = useCircleClick(id, onTokenClick)\n    const onNorthClick = useDirectionClick(Direction.North, id, onDirectionClick)\n    const onSouthClick = useDirectionClick(Direction.South, id, onDirectionClick)\n    const onWestClick = useDirectionClick(Direction.West, id, onDirectionClick)\n    const onEastClick = useDirectionClick(Direction.East, id, onDirectionClick)\n\n    // Styling\n\n    const colors = generateColors(color)\n    const containerStyle = generateContainerStyle(size)\n    const circleStyle = generateCircleStyle(colors)\n    const northStyle = generateNorthStyle(size, colors)\n    const southStyle = generateSouthStyle(size, colors)\n    const westStyle = generateWestStyle(size, colors)\n    const eastStyle = generateEastStyle(size, colors)\n\n    const containerClasses = classNames(\n        styles.container,\n        { [styles.selected]: selected },\n        containerClassName\n    )\n\n    const circleClasses = classNames(\n        styles.circle,\n        circleClassName\n    )\n\n    // JSX\n\n    return (\n        <div\n            className={containerClasses}\n            style={containerStyle}\n        >\n\n            <div\n                ref={circleRef}\n                onClick={onCircleClick}\n                className={circleClasses}\n                style={circleStyle}\n            >\n                <span>{symbol}</span>\n            </div>\n\n            <DirectionNode\n                direction={Direction.North}\n                currentDirection={direction}\n                onClick={onNorthClick}\n                className={styles.north}\n                style={northStyle}\n            />\n\n            <DirectionNode\n                direction={Direction.South}\n                currentDirection={direction}\n                onClick={onSouthClick}\n                className={styles.south}\n                style={southStyle}\n            />\n\n            <DirectionNode\n                direction={Direction.West}\n                currentDirection={direction}\n                onClick={onWestClick}\n                className={styles.west}\n                style={westStyle}\n            />\n\n            <DirectionNode\n                direction={Direction.East}\n                currentDirection={direction}\n                onClick={onEastClick}\n                className={styles.east}\n                style={eastStyle}\n            />\n\n        </div>\n    )\n}\n\nfunction DirectionNode({\n    direction,\n    currentDirection,\n    onClick,\n    className,\n    style\n}: DirectionProps) {\n    const current = direction === currentDirection\n    return (\n        <div\n            onClick={onClick}\n            className={classNames(className, styles.direction, { [styles.current]: current })}\n            style={style}\n        />\n    )\n}\n\n// Event handlers\n\nfunction useCircleClick(\n    id: string,\n    onTokenClick?: (id: string) => void\n) {\n    return useCallback((event) => {\n        if (onTokenClick) {\n            event.stopPropagation()\n            onTokenClick(id)\n        }\n    }, [id, onTokenClick])\n}\n\nfunction useDirectionClick(\n    direction: Direction, id: string,\n    onDirectionClick?: (id: string, direction: Direction) => void\n) {\n    return useCallback((event) => {\n        if (onDirectionClick) {\n            event.stopPropagation()\n            onDirectionClick(id, direction)\n        }\n    }, [direction, id, onDirectionClick])\n}\n\n// Styling\n\ntype Colors = {\n    backgroundColor: string\n    borderColor: string\n    textColor: string\n}\n\nfunction generateColors(color: string): Colors {\n    const chromaticity = chroma(color).get('lch.c')\n    const saturate = chromaticity > 10 ? 2 : 0\n\n    return {\n        backgroundColor: color,\n        borderColor: chroma(color).darken(2).saturate(saturate).hex(),\n        textColor: getTextColor(color)\n    }\n}\n\nfunction generateContainerStyle(size: number) {\n    return {\n        width: size + 'px',\n        height: size + 'px'\n    }\n}\n\nfunction generateCircleStyle(colors: Colors) {\n    return {\n        backgroundColor: colors.backgroundColor,\n        borderColor: colors.borderColor,\n        color: colors.textColor\n    }\n}\n\nfunction generateNorthStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        top: 0,\n        left: generatePosition(size),\n        borderLeftWidth: borderWidth,\n        borderRightWidth: borderWidth,\n        borderBottomWidth: borderWidth,\n        borderBottomColor: colors.borderColor\n    }\n}\n\nfunction generateSouthStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        bottom: 0,\n        left: generatePosition(size),\n        borderLeftWidth: borderWidth,\n        borderRightWidth: borderWidth,\n        borderTopWidth: borderWidth,\n        borderTopColor: colors.borderColor\n    }\n}\n\nfunction generateWestStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        top: generatePosition(size),\n        left: 0,\n        borderTopWidth: borderWidth,\n        borderBottomWidth: borderWidth,\n        borderRightWidth: borderWidth,\n        borderRightColor: colors.borderColor\n    }\n}\n\nfunction generateEastStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        top: generatePosition(size),\n        right: 0,\n        borderTopWidth: borderWidth,\n        borderBottomWidth: borderWidth,\n        borderLeftWidth: borderWidth,\n        borderLeftColor: colors.borderColor\n    }\n}\n\nfunction generateBorderWidth(size: number) {\n    return ((size / 10) * 3) + 'px'\n}\n\nfunction generatePosition(size: number) {\n    return (size / 5) + 'px'\n}\n","import { useDrag } from 'react-dnd'\nimport classNames from 'classnames'\nimport { useDisablePreview } from '../dnd'\nimport { BaseToken } from './BaseToken'\nimport { Direction } from './types'\nimport styles from './DraggableToken.module.css'\n\ntype Props = {\n    id: string\n    size: number\n    onTokenClick?: (id: string) => void\n    onDirectionClick?: (id: string, direction: Direction) => void\n}\n\nexport const TOKEN_DND_TYPE = 'Token'\n\nexport interface TokenDndItem {\n    id: string\n    size: number\n}\n\nexport function DraggableToken(props: Props) {\n    const { id, size } = props\n\n    const item: TokenDndItem = { id, size }\n\n    const [{ dragging }, drag, preview] = useDrag(() => ({\n        type: TOKEN_DND_TYPE,\n        item,\n        collect: (monitor) => ({ dragging: !!monitor.isDragging() })\n    }), [id, size])\n\n    useDisablePreview(preview)\n\n    const containerClassName = classNames({\n        [styles.dragging]: dragging\n    })\n\n    return (\n        <BaseToken\n            {...props}\n            circleRef={drag}\n            containerClassName={containerClassName}\n            circleClassName={styles.circle}\n        />\n    )\n}\n","import { XYCoord } from 'react-dnd'\nimport { BaseToken } from './BaseToken'\n\ntype Props = {\n    id: string\n    size: number\n    offset: XYCoord\n}\n\nexport function DraggableTokenPreview({\n    id,\n    size,\n    offset\n}: Props) {\n    const style = generateStyle(size, offset)\n    return (\n        <div style={style}>\n            <BaseToken\n                id={id}\n                size={size}\n            />\n        </div>\n    )\n}\n\nfunction generateStyle(size: number, offset: XYCoord) {\n    const diff = (size / 20) * 3\n    const x = offset.x - diff\n    const y = offset.y - diff\n    return { transform: `translate(${x}px, ${y}px)` }\n}\n","export * from './types'\nexport * from './state'\nexport { Field } from './Field'\n","import { createSlice } from '@reduxjs/toolkit'\n\nconst NAME = 'panel'\n\ninterface State {\n}\n\nconst initialState: State = {\n}\n\nexport const state = createSlice({\n    name: NAME,\n    initialState,\n    reducers: {\n    }\n})\n\n// export const {} = state.actions\n","import { useState, useEffect, ChangeEvent } from 'react'\n\nexport const useInput = (\n    initialValue: any,\n    listener?: (value: any) => void\n): [any, any, (value: any) => void] => {\n    const [value, setValue] = useState(initialValue)\n\n    useEffect(() => setValue(initialValue), [initialValue])\n\n    const bind = {\n        value,\n        onChange: (event: ChangeEvent<any>) => {\n            setValue(event.target.value)\n            if (listener) {\n                listener(event.target.value)\n            }\n        }\n    }\n\n    return [\n        bind,\n        value,\n        setValue\n    ]\n}\n","import { useCallback, FocusEventHandler } from 'react'\nimport { useInput } from './use-input'\nimport styles from './Forms.module.css'\n\ntype Props = {\n    label?: string\n    max: number\n    value: string\n    onChange: (value: string) => void\n    onFocus: FocusEventHandler<any>\n}\n\nexport function TextField({\n    label,\n    max,\n    value,\n    onChange,\n    onFocus\n}: Props) {\n    const changeHandler = useChangeHandler(max, onChange)\n    const [bind] = useInput(value, changeHandler)\n\n    return (\n        <div className={styles.element}>\n            {label ? <label className={styles.label}>{label}</label> : null}\n            <input\n                className={styles.input}\n                type=\"text\"\n                maxLength={max}\n                onFocus={onFocus}\n                {...bind}\n            />\n        </div>\n    )\n}\n\nfunction useChangeHandler(\n    max: number,\n    onChange: (value: string) => void\n) {\n    return useCallback((value) => {\n        if (value.length <= max) {\n            onChange(value)\n        }\n    }, [max, onChange])\n}\n","import { useCallback, useMemo, CSSProperties } from 'react'\nimport { useInput } from './use-input'\nimport styles from './Forms.module.css'\n\ntype Option = {\n    value: string\n    label?: string\n    style?: CSSProperties\n}\n\ntype Props = {\n    label?: string\n    options: Option[] | any[]\n    value: string\n    onChange: (value: string) => void\n}\n\nexport function SelectField({\n    label,\n    options,\n    value,\n    onChange\n}: Props) {\n    const changeHandler = useChangeHandler(onChange)\n    const [bind, currentValue] = useInput(value, changeHandler)\n\n    const optionsNormalized = useOptions(options)\n    const selectStyle = useSelectStyle(currentValue, optionsNormalized)\n\n    return (\n        <div className={styles.element}>\n            {label ? <label className={styles.label}>{label}</label> : null}\n            <select\n                className={styles.select}\n                style={selectStyle}\n                {...bind}\n            >\n                {optionsNormalized.map(generateOption)}\n            </select>\n        </div>\n    )\n}\n\nfunction useChangeHandler(onChange: (value: string) => void) {\n    return useCallback((value) => {\n        if (onChange) {\n            onChange(value)\n        }\n    }, [onChange])\n}\n\nfunction useOptions(options: Option[] | string[]): Option[] {\n    return useMemo(\n        () => options.map(transformOption),\n        [options]\n    )\n}\n\nfunction transformOption(option: Option | string): Option {\n    let value = null\n    let label = null\n    let style = undefined\n\n    if (typeof option === 'object' && option !== null && option.value !== undefined) {\n        value = option.value\n        label = option.label\n        style = option.style\n    } else {\n        value = option + ''\n    }\n\n    if (label === null || label === undefined) {\n        label = value\n    }\n\n    return {\n        value,\n        label,\n        style\n    }\n}\n\nfunction useSelectStyle(currentValue: string, options: Option[]) {\n    return useMemo(\n        () => getSelectStyle(currentValue, options),\n        [currentValue, options]\n    )\n}\n\nfunction getSelectStyle(currentValue: string, options: Option[]) {\n    const option = options.find(option => option.value === currentValue)\n    return option ? option.style : null\n}\n\nfunction generateOption({ value, label, style }: Option) {\n    return (\n        <option\n            key={value}\n            className={styles.option}\n            value={value}\n            style={style}\n        >\n            {label}\n        </option>\n    )\n}\n","import { ReactNode } from 'react'\nimport styles from './Panel.module.css'\n\ntype Props = {\n    title: string,\n    children: ReactNode\n}\n\nexport function Panel({ title, children }: Props) {\n    return (\n        <div>\n            <h1 className={styles.title}>{title}</h1>\n            {children}\n        </div>\n    )\n}\n","import { ReactNode } from 'react'\nimport styles from './PanelCategory.module.css'\n\ntype Props = {\n    title?: string,\n    children: ReactNode\n}\n\nexport function PanelCategory({ title, children }: Props) {\n    return (\n        <div className={styles.container}>\n            {title ? <h2 className={styles.title}>{title}</h2> : null}\n            {children}\n        </div>\n    )\n}\n","import { useCallback } from 'react'\nimport range from 'lodash.range'\nimport { useSelector, useDispatch } from '../app'\nimport { SelectField } from '../forms'\nimport { getColumns, getRows, updateFieldDimensions, MIN_DIMENSIONS, MAX_DIMENSIONS } from '../field'\nimport { Panel } from './Panel'\nimport { PanelCategory } from './PanelCategory'\n\nexport function FieldPanel() {\n    return (\n        <Panel title=\"Field\">\n            <Dimensions />\n        </Panel>\n    )\n}\n\nfunction Dimensions() {\n    const dispatch = useDispatch()\n    const columns = useSelector(getColumns)\n    const rows = useSelector(getRows)\n\n    const columnsChanged = useCallback((columns) => {\n        dispatch(updateFieldDimensions({\n            columns,\n            rows\n        }))\n    }, [dispatch, rows])\n\n    const rowsChanged = useCallback((rows) => {\n        dispatch(updateFieldDimensions({\n            columns,\n            rows\n        }))\n    }, [dispatch, columns])\n\n    return (\n        <PanelCategory>\n            <DimensionSelect\n                label=\"Columns\"\n                value={columns}\n                onChange={columnsChanged}\n            />\n            <DimensionSelect\n                label=\"Rows\"\n                value={rows}\n                onChange={rowsChanged}\n            />\n        </PanelCategory>\n    )\n}\n\ntype DimensionSelectProps = {\n    label: string,\n    value: number,\n    onChange: (value: string) => void\n}\n\nfunction DimensionSelect({\n    label, \n    value,\n    onChange\n}: DimensionSelectProps) {\n    const options = range(MIN_DIMENSIONS, MAX_DIMENSIONS + 1)\n    return (\n        <SelectField\n            label={label}\n            options={options}\n            value={value + ''}\n            onChange={onChange}\n        />\n    )\n}\n","import { useCallback, FocusEvent } from 'react'\nimport { useSelector, useDispatch } from '../app'\nimport { findTokenById, updateToken } from '../token'\nimport { TextField } from '../forms'\n\ntype Props = {\n    id: string\n}\n\nexport function TokenSymbolField({ id }: Props) {\n    const symbol = useSelector(state => {\n        const symbol = findTokenById(state, id)?.symbol\n        return symbol ? symbol : ''\n    })\n\n    const dispatch = useDispatch()\n    const onChange = useCallback((symbol) => {\n        dispatch(updateToken({\n            id,\n            symbol\n        }))\n    }, [dispatch, id])\n\n    const onFocus = (event: FocusEvent<any>) => event.target.select()\n\n    return (\n        <TextField\n            label=\"Symbol\"\n            max={1}\n            value={symbol}\n            onChange={onChange}\n            onFocus={onFocus}\n        />\n    )\n}\n","import { useCallback } from 'react'\nimport { useSelector, useDispatch } from '../app'\nimport { findTokenById, updateToken } from '../token'\nimport { SelectField } from '../forms'\nimport { getTextColor } from '../shared'\n\nconst colors = [\n    createColor('Yellow', '#fff2cc'),\n    createColor('Red', '#f8cecc'),\n    createColor('Purple', '#d1c4e9'),\n    createColor('Blue', '#bbdefb'),\n    createColor('Green', '#d5e8d4'),\n    createColor('Grey', '#cfd8dc'),\n    createColor('Dark yellow', '#fdd835'),\n    createColor('Dark red', '#c62828'),\n    createColor('Dark purple', '#673ab7'),\n    createColor('Dark blue', '#1976d2'),\n    createColor('Dark green', '#2e7d32'),\n    createColor('Dark gray', '#647687')\n]\n\nfunction createColor(label: string, color: string) {\n    return {\n        label,\n        value: normalizeColor(color),\n        style: {\n            backgroundColor: color,\n            color: getTextColor(color)\n        }\n    }\n}\n\nfunction normalizeColor(color?: string) {\n    return color ? color.toLowerCase() : null\n}\n\ntype Props = {\n    id: string\n}\n\n// TODO Nicht bekannte Farbe als Option darstellen.\nexport function TokenColorSelection({ id }: Props) {\n    const color = useSelector(state => {\n        const color = findTokenById(state, id)?.color\n        return normalizeColor(color)\n    })\n\n    const dispatch = useDispatch()\n    const onChange = useCallback((color) => {\n        dispatch(updateToken({\n            id,\n            color\n        }))\n    }, [dispatch, id])\n\n    return color ? (\n        <SelectField\n            label=\"Color\"\n            options={colors}\n            value={color}\n            onChange={onChange}\n        />\n    ) : null\n}\n","import { useCallback } from 'react'\nimport { useSelector, useDispatch } from '../app'\nimport { Direction, findTokenById, updateToken } from '../token'\nimport { SelectField } from '../forms'\n\nconst directions = [\n    { label: 'ðŸ¡… North', value: Direction.North },\n    { label: 'ðŸ¡† East', value: Direction.East },\n    { label: 'ðŸ¡‡ South', value: Direction.South },\n    { label: 'ðŸ¡„ West', value: Direction.West },\n    { label: 'None', value: Direction.None }\n]\n\ntype Props = {\n    id: string\n}\n\nexport function TokenDirectionSelection({ id }: Props) {\n    const direction = useSelector(state => {\n        const direction = findTokenById(state, id)?.direction\n        return direction ? direction : Direction.None\n    })\n\n    const dispatch = useDispatch()\n    const onChange = useCallback((direction) => {\n        dispatch(updateToken({\n            id,\n            direction\n        }))\n    }, [dispatch, id])\n\n    return (\n        <SelectField\n            label=\"Direction\"\n            options={directions}\n            value={direction}\n            onChange={onChange}\n        />\n    )\n}\n","import { Panel } from './Panel'\nimport { PanelCategory } from './PanelCategory'\nimport { TokenSymbolField } from './TokenSymbolField'\nimport { TokenColorSelection } from './TokenColorSelection'\nimport { TokenDirectionSelection } from './TokenDirectionSelection'\n\ntype Props = {\n    id: string\n}\n\nexport function TokenPanel({ id }: Props) {\n    return (\n        <Panel title=\"Token\">\n            <PanelCategory>\n                <TokenSymbolField id={id} />\n                <TokenColorSelection id={id} />\n                <TokenDirectionSelection id={id} />\n            </PanelCategory>\n        </Panel>\n    )\n}\n","import { useSelector } from 'react-redux'\nimport classNames from 'classnames'\nimport { getSelectedTokenId } from '../token'\nimport { FieldPanel } from './FieldPanel'\nimport { TokenPanel } from './TokenPanel'\nimport styles from './PanelContainer.module.css'\n\ntype Prop = {\n    className?: string\n}\n\nexport function PanelContainer({ className }: Prop) {\n    const selectedTokenId = useSelector(getSelectedTokenId)\n\n    return (\n        <div className={classNames(styles.container, className)}>\n            {selectedTokenId\n                ? <TokenPanel id={selectedTokenId} />\n                : <FieldPanel />\n            }\n        </div>\n    )\n}\n","import { Field } from '../field'\nimport { PanelContainer } from '../panel'\nimport styles from './Layout.module.css'\nimport './base.css'\n\nexport function Layout() {\n    return (\n        <div className={styles.container}>\n            <Field className={styles.field} />\n            <PanelContainer className={styles.tokenPanel} />\n        </div>\n    )\n}\n","import { useSelector as useSelectorRaw, useDispatch as useDispatchRaw } from 'react-redux'\nimport { configureStore } from '@reduxjs/toolkit'\nimport { state as tokens } from '../token'\nimport { state as field } from '../field'\nimport { state as panel } from '../panel'\n\nexport const store = configureStore({\n    reducer: {\n        [tokens.name]: tokens.reducer,\n        [field.name]: field.reducer,\n        [panel.name]: panel.reducer\n    }\n})\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type RootDispatch = typeof store.dispatch\n\nexport function useSelector<TState = RootState, TSelected = unknown>(\n    selector: (state: TState) => TSelected,\n    equalityFn?: (left: TSelected, right: TSelected) => boolean\n) : TSelected {\n    return useSelectorRaw(selector, equalityFn)\n}\n\nexport const useDispatch = () => useDispatchRaw<RootDispatch>()\n","import { StrictMode } from 'react'\nimport { Provider } from 'react-redux'\nimport { DndProvider } from '../dnd'\nimport { Layout } from './Layout'\nimport { store } from './store'\nimport { updateFieldDimensions, moveToken } from '../field'\nimport { createToken, Direction } from '../token'\n\nexport function App() {\n    return (\n        <StrictMode>\n            <Provider store={store}>\n                <DndProvider>\n                    <Layout />\n                </DndProvider>\n            </Provider>\n        </StrictMode>\n    )\n}\n\n// TODO Remove example data:\n\nstore.dispatch(updateFieldDimensions({\n    columns: 5,\n    rows: 5\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'T',\n    direction: Direction.West\n}))\n\nstore.dispatch(moveToken({\n    id: '0',\n    x: 3,\n    y: 4\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'E',\n    direction: Direction.South\n}))\n\nstore.dispatch(moveToken({\n    id: '1',\n    x: 1,\n    y: 0\n}))\n\nstore.dispatch(createToken({\n    color: '#F8CECC',\n    symbol: 'M',\n    direction: Direction.South\n}))\n\nstore.dispatch(moveToken({\n    id: '2',\n    x: 1,\n    y: 1\n}))\n\nstore.dispatch(createToken({\n    color: '#F8CECC',\n    symbol: 'M',\n    direction: Direction.South\n}))\n\nstore.dispatch(moveToken({\n    id: '3',\n    x: 2,\n    y: 2\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'Y',\n    direction: Direction.West\n}))\n\nstore.dispatch(moveToken({\n    id: '4',\n    x: 3,\n    y: 2\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'K',\n    direction: Direction.North\n}))\n\nstore.dispatch(moveToken({\n    id: '5',\n    x: 1,\n    y: 3\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '6',\n    x: 4,\n    y: 0\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '7',\n    x: 3,\n    y: 1\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '8',\n    x: 0,\n    y: 2\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '9',\n    x: 1,\n    y: 4\n}))\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"element\":\"Forms_element__3Ktu0\",\"label\":\"Forms_label__9aoLd\",\"input\":\"Forms_input__34n01\",\"select\":\"Forms_select__32bDl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BaseToken_container__jdpcL\",\"circle\":\"BaseToken_circle__170NU\",\"direction\":\"BaseToken_direction__3CpQa\",\"selected\":\"BaseToken_selected__2gzaC\",\"current\":\"BaseToken_current__12_Yh\",\"north\":\"BaseToken_north__Nv6fV\",\"south\":\"BaseToken_south__3fbS4\",\"west\":\"BaseToken_west__3DAO8\",\"east\":\"BaseToken_east__28uYt\"};","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { RootState } from '../app'\nimport { Cell } from './types'\n\nexport const MIN_DIMENSIONS = 1\nexport const MAX_DIMENSIONS = 100\n\ninterface State {\n    columns: number\n    rows: number,\n    cells: Cell[][]\n}\n\nconst initialState: State = {\n    columns: 1,\n    rows: 1,\n    cells: [ [ createCell(0, 0) ] ]\n}\n\nconst NAME = 'field'\n\nexport const state = createSlice({\n    name: NAME,\n    initialState,\n    reducers: {\n\n        updateFieldDimensions(state, action: PayloadAction<{ columns: number, rows: number }>) {\n            const columns = normalizeDimension(action.payload.columns)\n            const rows = normalizeDimension(action.payload.rows)\n\n            // Columns\n\n            const columnsDiff = columns - state.columns\n\n            if (columnsDiff > 0) {\n                growColumns(state, columnsDiff)\n            } else if (columnsDiff < 0) {\n                shrinkColumns(state, Math.abs(columnsDiff))\n            }\n\n            state.columns = columns\n\n            // Rows\n\n            const rowsDiff = rows - state.rows\n\n            if (rowsDiff > 0) {\n                growRows(state, rowsDiff)\n            } else if (rowsDiff < 0) {\n                shrinkRows(state, Math.abs(rowsDiff))\n            }\n\n            state.rows = rows\n        },\n\n        moveToken(state, action: PayloadAction<{ id: string, x: number, y: number }>) {\n            const { id, x, y } = action.payload\n\n            for (let x = 0; x < state.columns; x++) {\n                for (let y = 0; y < state.rows; y++) {\n                    const cell = state.cells[x][y]\n\n                    if (cell.tokenId === id) {\n                        cell.tokenId = undefined\n                        break\n                    }\n                }\n            }\n\n            state.cells[x][y].tokenId = id\n        }\n\n    }\n})\n\nfunction normalizeDimension(value: number) {\n    return Math.max(MIN_DIMENSIONS, Math.min(MAX_DIMENSIONS, value))\n}\n\nfunction createCell(x: number, y: number, tokenId?: string): Cell {\n    return {\n        x,\n        y,\n        tokenId\n    }\n}\n\nfunction growColumns(state: State, increase: number) {\n    const columnsStart = state.columns\n    const columnsEnd = state.columns + increase\n\n    for (let x = columnsStart; x < columnsEnd; x++) {\n        state.cells[x] = []\n\n        for (let y = 0; y < state.rows; y++) {\n            state.cells[x][y] = createCell(x, y)\n        }\n    }\n}\n\nfunction growRows(state: State, increase: number) {\n    const rowsStart = state.rows\n    const rowsEnd = state.rows + increase\n\n    for (let x = 0; x < state.columns; x++) {\n        for (let y = rowsStart; y < rowsEnd; y++) {\n            state.cells[x][y] = createCell(x, y)\n        }\n    }\n}\n\nfunction shrinkColumns(state: State, decrease: number) {\n    const columnsStart = state.columns - decrease\n    const columnsEnd = state.columns\n\n    for (let x = columnsStart; x < columnsEnd; x++) {\n        for (let y = 0; y < state.rows; y++) {\n            const tokenId = state.cells[x][y]\n            // TODO Delete Token\n            console.log('TODO Delete Token:', tokenId)\n        }\n    }\n\n    state.cells.splice(columnsStart, decrease)\n}\n\nfunction shrinkRows(state: State, decrease: number) {\n    const rowsStart = state.rows - decrease\n    const rowsEnd = state.rows\n\n    for (let x = 0; x < state.columns; x++) {\n        for (let y = rowsStart; y < rowsEnd; y++) {\n            const tokenId = state.cells[x][y]\n            // TODO Delete Token\n            console.log('TODO Delete Token:', tokenId)\n        }\n\n        state.cells[x].splice(rowsStart, decrease)\n    }\n}\n\nexport const getColumns = (state: RootState) => state[NAME].columns\nexport const getRows = (state: RootState) => state[NAME].rows\nexport const findCellByCoordinates = (state: RootState, x: number, y: number) => {\n    const column = state[NAME].cells[x]\n    return column ? column[y] : undefined\n}\n\nexport const {\n    updateFieldDimensions,\n    moveToken\n} = state.actions\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"Cell_cell__fv93r\",\"firstRow\":\"Cell_firstRow__2E9oE\",\"lastColumn\":\"Cell_lastColumn__2WNNW\",\"droppable\":\"Cell_droppable__1P9wT\"};","import { useDragLayer, XYCoord } from 'react-dnd'\nimport { TOKEN_DND_TYPE, DraggableTokenPreview } from '../token'\nimport styles from './CustomDragLayer.module.css'\n\nexport function CustomDragLayer() {\n    const {\n        item,\n        itemType,\n        currentOffset,\n        isDragging\n    } = useDragLayer(monitor => ({\n        item: monitor.getItem(),\n        itemType: monitor.getItemType(),\n        currentOffset: monitor.getSourceClientOffset(),\n        isDragging: monitor.isDragging()\n    }))\n\n    if (!isDragging || !currentOffset) {\n        return null\n    }\n    const preview = renderPreview(itemType, item, currentOffset)\n\n    if (!preview) {\n        return null\n    }\n\n    return (\n        <div className={styles.layer}>\n            {preview}\n        </div>\n    )\n}\n\nfunction renderPreview(type: any, item: any, offset: XYCoord) {\n    switch (type) {\n        case TOKEN_DND_TYPE:\n            return <DraggableTokenPreview offset={offset} {...item} />\n        default:\n            return null\n    }\n}\n","import { ReactNode } from 'react'\nimport { DndProvider as Provider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { CustomDragLayer } from './CustomDragLayer'\n\ntype Props = {\n    children: ReactNode\n}\n\n// TODO Aktuell kein TouchBackend mit \"enableMouseEvents: true\" weil:\n// Unterschied durch Touch-Backend zwischen Mouse und Touch:\n// Bei Mouse wird nach Drag die Selektierung von Tokens aufgehoben (durch Click-Event auf Grid).\nexport function DndProvider({ children }: Props) {\n    return (\n        <Provider backend={HTML5Backend}>\n            <CustomDragLayer />\n            {children}\n        </Provider>\n    )\n}\n","import { useEffect } from 'react'\nimport { ConnectDragPreview } from 'react-dnd'\n\nconst empty = new Image()\nempty.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='\n\nexport function useDisablePreview(preview: ConnectDragPreview) {\n    useEffect(() => {\n        preview(empty, { captureDraggingState: true })\n    }, [preview])\n}\n","import chroma from 'chroma-js'\n\nconst BLACK_TEXT = '#000000'\nconst WHITE_TEXT = '#FFFFFF'\n\nexport function getTextColor(color: string): string {\n    const blackText = chroma.contrast(BLACK_TEXT, color) >= chroma.contrast(WHITE_TEXT, color)\n    return blackText ? BLACK_TEXT : WHITE_TEXT\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Layout_container__2El7r\",\"field\":\"Layout_field__3DuOE\",\"tokenPanel\":\"Layout_tokenPanel__3M8Lg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"circle\":\"DraggableToken_circle__2e89C\",\"dragging\":\"DraggableToken_dragging__3643i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"field\":\"Field_field__1PltA\",\"gridWrapper\":\"Field_gridWrapper__oluTN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PanelCategory_container__2ywKt\",\"title\":\"PanelCategory_title__2RLOE\"};","import { CSSProperties, useCallback } from 'react'\nimport { useSelector, useDispatch, RootDispatch } from '../app'\nimport { DraggableToken, selectToken, deselectToken, toggleTokenDirection, isTokenSelected } from '../token'\n\ntype Props = {\n    id: string\n    size: number\n}\n\nexport function CellToken({\n    id,\n    size\n}: Props) {\n    const selected = useSelector((state) => isTokenSelected(state, id))\n\n    const dispatch = useDispatch()\n    const onTokenClick = useTokenClickHandler(selected, dispatch)\n    const onDirectionClick = useDirectionClickHandler(selected, dispatch)\n\n    const style = generateContainerStyle(size)\n\n    return (\n        <div style={style}>\n            <DraggableToken\n                id={id}\n                size={size}\n                onTokenClick={onTokenClick}\n                onDirectionClick={onDirectionClick}\n            />\n        </div>\n    )\n}\n\nfunction useTokenClickHandler(selected: boolean, dispatch: RootDispatch) {\n    return useCallback((id) => {\n        if (!selected) {\n            dispatch(selectToken({ id }))\n        } else {\n            dispatch(deselectToken())\n        }\n    }, [dispatch, selected])\n}\n\nfunction useDirectionClickHandler(selected: boolean, dispatch: RootDispatch) {\n    return useCallback((id, direction) => {\n        if (selected) {\n            dispatch(toggleTokenDirection({ id, direction }))\n        } else {\n            dispatch(selectToken({ id }))\n        }\n    }, [selected, dispatch])\n}\n\nfunction generateContainerStyle(size: number): CSSProperties {\n    const width = size + 'px'\n    const height = size + 'px'\n\n    return {\n        position: 'absolute',\n        left: '-1px',\n        top: '-1px',\n        width,\n        height\n    }\n}\n","import { CSSProperties } from 'react'\nimport { useDrop } from 'react-dnd'\nimport classNames from 'classnames'\nimport { useSelector, useDispatch } from '../app'\nimport { TokenDndItem, TOKEN_DND_TYPE } from '../token'\nimport { findCellByCoordinates, moveToken } from './state'\nimport { CellToken } from './CellToken'\nimport styles from './Cell.module.css'\n\ntype Props = {\n    x: number,\n    y: number,\n    size: number,\n    firstRow: boolean,\n    lastColumn: boolean\n}\n\nexport function Cell({\n    x,\n    y,\n    size,\n    firstRow,\n    lastColumn\n}: Props) {\n    const cell = useSelector((state) => findCellByCoordinates(state, x, y))\n    const tokenId = cell?.tokenId\n    const empty = tokenId === undefined\n\n    const [{ isOver, canDrop }, drop] = useDroppable(x, y, empty)\n\n    const className = classNames(\n        styles.cell,\n        {\n            [styles.firstRow]: firstRow,\n            [styles.lastColumn]: lastColumn,\n            [styles.droppable]: isOver && canDrop\n        }\n    )\n\n    const style = generateStyle(size)\n\n    return (\n        <div\n            ref={drop}\n            className={className}\n            style={style}\n        >\n            {tokenId ? <CellToken id={tokenId} size={size} /> : null}\n        </div>\n    )\n}\n\nfunction useDroppable(x: number, y: number, empty: boolean) {\n    const dispatch = useDispatch()\n\n    return useDrop(() => ({\n        accept: TOKEN_DND_TYPE,\n        canDrop: () => empty,\n        drop: (item: TokenDndItem) => dispatch(moveToken({ x, y, id: item.id })),\n        collect: (monitor) => ({\n            isOver: !!monitor.isOver(),\n            canDrop: !!monitor.canDrop()\n        })\n    }), [x, y, empty, dispatch])\n}\n\nfunction generateStyle(cellSize: number): CSSProperties {\n    const size = cellSize + 'px'\n    return {\n        width: size,\n        height: size\n    }\n}\n","import styles from './Grid.module.css'\nimport { useSelector } from '../app'\nimport { getColumns, getRows } from './state'\nimport { Cell } from './Cell'\n\ntype Props = {\n    cellSize: number\n}\n\nexport function Grid({ cellSize }: Props) {\n    const columns = useSelector(getColumns)\n    const rows = useSelector(getRows)\n\n    const style = generateGridStyle(columns, rows, cellSize)\n    const cells = generateCells(columns, rows, cellSize)\n\n    return (\n        <div className={styles.grid} style={style}>\n            {cells}\n        </div>\n    )\n}\n\nfunction generateGridStyle(columns: number, rows: number, cellSize: number) {\n    return {\n        width: (columns * cellSize) + 'px',\n        height: (rows * cellSize) + 'px'\n    }\n}\n\nfunction generateCells(columns: number, rows: number, cellSize: number) {\n    const cells = []\n\n    for (let y = 0; y < rows; y++) {\n        const firstRow = y === 0\n\n        for (let x = 0; x < columns; x++) {\n            const lastColumn = x === columns - 1\n\n            cells.push(\n                <Cell\n                    key={x + ';' + y}\n                    x={x}\n                    y={y}\n                    size={cellSize}\n                    firstRow={firstRow}\n                    lastColumn={lastColumn}\n                />\n            )\n        }\n    }\n\n    return cells\n}\n","import classNames from 'classnames'\nimport { useDispatch } from '../app'\nimport { deselectToken } from '../token'\nimport { Grid } from './Grid'\nimport styles from './Field.module.css'\n\nconst BASE_CELL_SIZE = 100\n\ntype Prop = {\n    className?: string\n}\n\nexport function Field({ className }: Prop) {\n    const dispatch = useDispatch()\n    const onDeselectToken = () => dispatch(deselectToken())\n\n    return (\n        <div className={classNames(styles.field, className)}>\n            <div\n                className={styles.gridWrapper}\n                onClick={onDeselectToken}\n            >\n                <Grid cellSize={BASE_CELL_SIZE} />\n            </div>\n        </div>\n    )\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layer\":\"CustomDragLayer_layer__3Oi1J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"Grid_grid__5dSy0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Panel_title__2jCxg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PanelContainer_container__12MNC\"};","import ReactDOM from 'react-dom'\nimport { App } from './app'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}