{"version":3,"sources":["token/types.ts","token/state.ts","token/BaseToken.tsx","token/DraggableToken.tsx","token/DraggableTokenPreview.tsx","field/index.ts","view/state.ts","toolbar/ToolbarGroup.tsx","toolbar/ToolbarButton.tsx","toolbar/token/DeleteTokenToolbarButton.tsx","toolbar/token/TokenToolbarGroup.tsx","toolbar/history/UndoToolbarButton.tsx","toolbar/history/RedoToolbarButton.tsx","toolbar/history/HistoryToolbarGroup.tsx","toolbar/view/TogglePanelToolbarButton.tsx","toolbar/view/ViewToolbarGroup.tsx","toolbar/Toolbar.tsx","forms/use-input.ts","forms/TextField.tsx","forms/SelectField.tsx","panel/Panel.tsx","panel/PanelCategory.tsx","panel/FieldPanel.tsx","panel/TokenSymbolField.tsx","panel/TokenColorSelection.tsx","panel/TokenDirectionSelection.tsx","panel/TokenPanel.tsx","panel/PanelContainer.tsx","app/store.ts","app/Layout.tsx","app/App.tsx","forms/Forms.module.css","token/BaseToken.module.css","field/state.ts","toolbar/Toolbar.module.css","field/Cell.module.css","app/Layout.module.css","dnd/CustomDragLayer.tsx","dnd/DndProvider.tsx","dnd/use-disable-preview.ts","shared/text.ts","token/DraggableToken.module.css","field/Field.module.css","panel/PanelCategory.module.css","field/CellToken.tsx","field/Cell.tsx","field/Grid.tsx","field/Field.tsx","dnd/CustomDragLayer.module.css","field/Grid.module.css","panel/Panel.module.css","panel/PanelContainer.module.css","index.tsx"],"names":["Direction","NAME","slice","createSlice","name","initialState","nextTokenId","ids","entities","reducers","createToken","state","action","id","token","payload","push","updateToken","toggleTokenDirection","direction","None","deleteToken","index","indexOf","splice","findTokenById","present","actions","reducer","undoable","filter","includeAction","type","BaseToken","size","onTokenClick","onDirectionClick","circleRef","containerClassName","circleClassName","selected","useSelector","getSelectedTokenId","symbol","color","onCircleClick","useCallback","event","stopPropagation","useCircleClick","onNorthClick","useDirectionClick","North","onSouthClick","South","onWestClick","West","onEastClick","East","colors","saturate","chroma","get","backgroundColor","borderColor","darken","hex","textColor","getTextColor","generateColors","containerStyle","width","height","generateContainerStyle","circleStyle","generateCircleStyle","northStyle","borderWidth","generateBorderWidth","top","left","generatePosition","borderLeftWidth","borderRightWidth","borderBottomWidth","borderBottomColor","generateNorthStyle","southStyle","bottom","borderTopWidth","borderTopColor","generateSouthStyle","westStyle","borderRightColor","generateWestStyle","eastStyle","right","borderLeftColor","generateEastStyle","containerClasses","classNames","styles","container","circleClasses","circle","className","style","ref","onClick","DirectionNode","currentDirection","north","south","west","east","current","TOKEN_DND_TYPE","DraggableToken","props","item","useDrag","collect","monitor","dragging","isDragging","drag","preview","useDisablePreview","DraggableTokenPreview","offset","diff","x","y","transform","generateStyle","panelVisible","selectedTokenId","undefined","togglePanel","selectToken","deselectToken","extraReducers","builder","addCase","isPanelVisible","isTokenSelected","ToolbarGroup","children","group","ToolbarButton","label","disabled","button","DeleteTokenToolbarButton","tokenId","dispatch","useDispatch","TokenToolbarGroup","UndoToolbarButton","isUndoable","ActionCreators","undo","Object","values","sub","past","length","RedoToolbarButton","isRedoable","redo","future","HistoryToolbarGroup","TogglePanelToolbarButton","ViewToolbarGroup","Toolbar","memo","useInput","initialValue","listener","useState","value","setValue","useEffect","onChange","target","TextField","max","onFocus","changeHandler","useChangeHandler","bind","element","input","maxLength","SelectField","options","currentValue","optionsNormalized","useMemo","map","transformOption","useOptions","selectStyle","option","find","getSelectStyle","useSelectStyle","select","generateOption","Panel","title","PanelCategory","FieldPanel","Dimensions","columns","getColumns","rows","getRows","columnsChanged","updateFieldDimensions","rowsChanged","DimensionSelect","range","MIN_DIMENSIONS","MAX_DIMENSIONS","TokenSymbolField","createColor","normalizeColor","toLowerCase","TokenColorSelection","directions","TokenDirectionSelection","TokenPanel","PanelContainer","store","configureStore","tokens","tokensReducer","field","fieldReducer","view","viewReducer","selector","equalityFn","useSelectorRaw","useDispatchRaw","Layout","panel","panelWidth","gridTemplateColumns","toolbar","tokenPanel","App","moveToken","clearHistory","module","exports","cells","createCell","normalizeDimension","columnsDiff","increase","columnsStart","columnsEnd","growColumns","decrease","console","log","shrinkColumns","Math","abs","rowsDiff","rowsStart","rowsEnd","growRows","shrinkRows","removeToken","min","cell","findCellByCoordinates","column","groupBy","groupByActionTypes","CustomDragLayer","useDragLayer","getItem","itemType","getItemType","currentOffset","getSourceClientOffset","renderPreview","layer","DndProvider","backend","HTML5Backend","empty","Image","captureDraggingState","src","BLACK_TEXT","WHITE_TEXT","contrast","CellToken","useTokenClickHandler","useDirectionClickHandler","position","Cell","firstRow","lastColumn","useDrop","accept","canDrop","drop","isOver","useDroppable","droppable","cellSize","Grid","generateGridStyle","generateCells","grid","Field","gridWrapper","ReactDOM","render","document","getElementById"],"mappings":"qGAAO,IAAKA,E,+XAAAA,K,cAAAA,E,cAAAA,E,YAAAA,E,YAAAA,E,aAAAA,M,yCCKCC,EAAO,SAcdC,EAAQC,YAAY,CACtBC,KAAMH,EACNI,aARwB,CACxBC,YAAa,EACbC,IAAK,GACLC,SAAU,IAMVC,SAAU,CAENC,YAFM,SAEMC,EAAOC,GACf,IAAMC,EAAMF,EAAML,cAAiB,GAC7BQ,EAAK,aAAKD,MAAOD,EAAOG,SAC9BJ,EAAMJ,IAAIS,KAAKH,GACfF,EAAMH,SAASK,GAAMC,GAGzBG,YATM,SASMN,EAAOC,GACf,IAAMC,EAAKD,EAAOG,QAAQF,GACpBC,EAAQH,EAAMH,SAASK,GAEzBC,IACAH,EAAMH,SAASK,GAAf,2BACOC,GACAF,EAAOG,WAKtBG,qBArBM,SAqBeP,EAAOC,GAA8D,IAAD,EAC3DA,EAAOG,QAAzBF,EAD6E,EAC7EA,GAAIM,EADyE,EACzEA,UACNL,EAAQH,EAAMH,SAASK,GAExBC,IAIDA,EAAMK,YAAcA,EACpBL,EAAMK,UAAYA,EAElBL,EAAMK,UAAYnB,EAAUoB,OAIpCC,YApCM,SAoCMV,EAAOC,GAAwC,IAC/CC,EAAOD,EAAOG,QAAdF,GACFS,EAAQX,EAAMJ,IAAIgB,QAAQV,GAE5BS,GAAS,IACTX,EAAMJ,IAAIiB,OAAOF,EAAO,UACjBX,EAAMH,SAASK,QAQzBY,EAAgB,SAACd,EAAkBE,GAAnB,OAAqDF,EAAMV,GAAMyB,QAAQlB,SAASK,I,EAO3GX,EAAMyB,QAJNjB,E,EAAAA,YACAO,E,EAAAA,YACAC,E,EAAAA,qBACAG,E,EAAAA,YAGSO,EAAUC,IAAS3B,EAAM0B,QAAS,CAC3CE,OAAQC,wBAAc,CAClBrB,EAAYsB,KACZf,EAAYe,KACZd,EAAqBc,KACrBX,EAAYW,S,8FC1Db,SAASC,EAAT,GAQI,IAPPpB,EAOM,EAPNA,GACAqB,EAMM,EANNA,KACAC,EAKM,EALNA,aACAC,EAIM,EAJNA,iBACAC,EAGM,EAHNA,UACAC,EAEM,EAFNA,mBACAC,EACM,EADNA,gBAGMC,EAAWC,aAAY,SAAA9B,GAAK,OAAI+B,YAAmB/B,KAAWE,KAC9DC,EAAQ2B,aAAY,SAAA9B,GAAK,OAAIc,EAAcd,EAAOE,MAClD8B,EAAS7B,EAAQA,EAAM6B,OAAS,GAChCC,EAAQ9B,EAAQA,EAAM8B,MAAQ,UAC9BzB,EAAYL,EAAQA,EAAMK,UAAYnB,EAAUoB,KAGhDyB,EAmGV,SACIhC,EACAsB,GAEA,OAAOW,uBAAY,SAACC,GACZZ,IACAY,EAAMC,kBACNb,EAAatB,MAElB,CAACA,EAAIsB,IA5Gcc,CAAepC,EAAIsB,GACnCe,EAAeC,EAAkBnD,EAAUoD,MAAOvC,EAAIuB,GACtDiB,EAAeF,EAAkBnD,EAAUsD,MAAOzC,EAAIuB,GACtDmB,EAAcJ,EAAkBnD,EAAUwD,KAAM3C,EAAIuB,GACpDqB,EAAcN,EAAkBnD,EAAU0D,KAAM7C,EAAIuB,GAIpDuB,EA2HV,SAAwBf,GACpB,IACMgB,EADeC,IAAOjB,GAAOkB,IAAI,SACP,GAAK,EAAI,EAEzC,MAAO,CACHC,gBAAiBnB,EACjBoB,YAAaH,IAAOjB,GAAOqB,OAAO,GAAGL,SAASA,GAAUM,MACxDC,UAAWC,YAAaxB,IAlIbyB,CAAezB,GACxB0B,EAqIV,SAAgCpC,GAC5B,MAAO,CACHqC,MAAOrC,EAAO,KACdsC,OAAQtC,EAAO,MAxIIuC,CAAuBvC,GACxCwC,EA2IV,SAA6Bf,GACzB,MAAO,CACHI,gBAAiBJ,EAAOI,gBACxBC,YAAaL,EAAOK,YACpBpB,MAAOe,EAAOQ,WA/IEQ,CAAoBhB,GAClCiB,EAkJV,SAA4B1C,EAAcyB,GACtC,IAAMkB,EAAcC,EAAoB5C,GACxC,MAAO,CACH6C,IAAK,EACLC,KAAMC,EAAiB/C,GACvBgD,gBAAiBL,EACjBM,iBAAkBN,EAClBO,kBAAmBP,EACnBQ,kBAAmB1B,EAAOK,aA1JXsB,CAAmBpD,EAAMyB,GACtC4B,EA6JV,SAA4BrD,EAAcyB,GACtC,IAAMkB,EAAcC,EAAoB5C,GACxC,MAAO,CACHsD,OAAQ,EACRR,KAAMC,EAAiB/C,GACvBgD,gBAAiBL,EACjBM,iBAAkBN,EAClBY,eAAgBZ,EAChBa,eAAgB/B,EAAOK,aArKR2B,CAAmBzD,EAAMyB,GACtCiC,EAwKV,SAA2B1D,EAAcyB,GACrC,IAAMkB,EAAcC,EAAoB5C,GACxC,MAAO,CACH6C,IAAKE,EAAiB/C,GACtB8C,KAAM,EACNS,eAAgBZ,EAChBO,kBAAmBP,EACnBM,iBAAkBN,EAClBgB,iBAAkBlC,EAAOK,aAhLX8B,CAAkB5D,EAAMyB,GACpCoC,EAmLV,SAA2B7D,EAAcyB,GACrC,IAAMkB,EAAcC,EAAoB5C,GACxC,MAAO,CACH6C,IAAKE,EAAiB/C,GACtB8D,MAAO,EACPP,eAAgBZ,EAChBO,kBAAmBP,EACnBK,gBAAiBL,EACjBoB,gBAAiBtC,EAAOK,aA3LVkC,CAAkBhE,EAAMyB,GAEpCwC,EAAmBC,IACrBC,IAAOC,UADwB,eAE5BD,IAAO7D,SAAWA,GACrBF,GAGEiE,EAAgBH,IAClBC,IAAOG,OACPjE,GAKJ,OACI,sBACIkE,UAAWN,EACXO,MAAOpC,EAFX,UAKI,qBACIqC,IAAKtE,EACLuE,QAAS/D,EACT4D,UAAWF,EACXG,MAAOhC,EAJX,SAMI,+BAAO/B,MAGX,cAACkE,EAAD,CACI1F,UAAWnB,EAAUoD,MACrB0D,iBAAkB3F,EAClByF,QAAS1D,EACTuD,UAAWJ,IAAOU,MAClBL,MAAO9B,IAGX,cAACiC,EAAD,CACI1F,UAAWnB,EAAUsD,MACrBwD,iBAAkB3F,EAClByF,QAASvD,EACToD,UAAWJ,IAAOW,MAClBN,MAAOnB,IAGX,cAACsB,EAAD,CACI1F,UAAWnB,EAAUwD,KACrBsD,iBAAkB3F,EAClByF,QAASrD,EACTkD,UAAWJ,IAAOY,KAClBP,MAAOd,IAGX,cAACiB,EAAD,CACI1F,UAAWnB,EAAU0D,KACrBoD,iBAAkB3F,EAClByF,QAASnD,EACTgD,UAAWJ,IAAOa,KAClBR,MAAOX,OAOvB,SAASc,EAAT,GAMoB,IALhB1F,EAKe,EALfA,UACA2F,EAIe,EAJfA,iBACAF,EAGe,EAHfA,QACAH,EAEe,EAFfA,UACAC,EACe,EADfA,MAEMS,EAAUhG,IAAc2F,EAC9B,OACI,qBACIF,QAASA,EACTH,UAAWL,IAAWK,EAAWJ,IAAOlF,UAAnB,eAAiCkF,IAAOc,QAAUA,IACvET,MAAOA,IAmBnB,SAASvD,EACLhC,EAAsBN,EACtBuB,GAEA,OAAOU,uBAAY,SAACC,GACZX,IACAW,EAAMC,kBACNZ,EAAiBvB,EAAIM,MAE1B,CAACA,EAAWN,EAAIuB,IAqFvB,SAAS0C,EAAoB5C,GACzB,OAASA,EAAO,GAAM,EAAK,KAG/B,SAAS+C,EAAiB/C,GACtB,OAAQA,EAAO,EAAK,K,6CCjPXkF,EAAiB,QAOvB,SAASC,EAAeC,GAAe,IAClCzG,EAAayG,EAAbzG,GAAIqB,EAASoF,EAATpF,KAENqF,EAAqB,CAAE1G,KAAIqB,QAHQ,EAKHsF,aAAQ,iBAAO,CACjDxF,KAAMoF,EACNG,OACAE,QAAS,SAACC,GAAD,MAAc,CAAEC,WAAYD,EAAQE,kBAC7C,CAAC/G,EAAIqB,IATgC,mBAKhCyF,EALgC,KAKhCA,SAAYE,EALoB,KAKdC,EALc,KAWzCC,YAAkBD,GAElB,IAAMxF,EAAqB8D,IAAW,eACjCC,IAAOsB,SAAWA,IAGvB,OACI,cAAC1F,EAAD,2BACQqF,GADR,IAEIjF,UAAWwF,EACXvF,mBAAoBA,EACpBC,gBAAiB8D,IAAOG,UClC7B,SAASwB,EAAT,GAII,IAHPnH,EAGM,EAHNA,GACAqB,EAEM,EAFNA,KAGMwE,EAWV,SAAuBxE,EAAc+F,GACjC,IAAMC,EAAQhG,EAAO,GAAM,EACrBiG,EAAIF,EAAOE,EAAID,EACfE,EAAIH,EAAOG,EAAIF,EACrB,MAAO,CAAEG,UAAU,aAAD,OAAeF,EAAf,eAAuBC,EAAvB,QAfJE,CAAcpG,EADtB,EADN+F,QAGA,OACI,qBAAKvB,MAAOA,EAAZ,SACI,cAACzE,EAAD,CACIpB,GAAIA,EACJqB,KAAMA,Q,6BCnBtB,qiC,gUCIajC,EAAO,OAOdI,EAAsB,CACxBkI,cAAc,EACdC,qBAAiBC,GAGfvI,EAAQC,YAAY,CACtBC,KAAMH,EACNI,eACAI,SAAU,CAENiI,YAFM,SAEM/H,GACRA,EAAM4H,cAAgB5H,EAAM4H,cAGhCI,YANM,SAMMhI,EAAOC,GAAwC,IAC/CC,EAAOD,EAAOG,QAAdF,GACRF,EAAM6H,gBAAkB3H,GAG5B+H,cAXM,SAWQjI,GACVA,EAAM6H,qBAAkBC,IAIhCI,cAAe,SAACC,GAEZA,EAAQC,QAAQ1H,KAAa,SAACV,EAAOC,GAAY,IACrCC,EAAOD,EAAOG,QAAdF,GAEJF,EAAM6H,kBAAoB3H,IAC1BF,EAAM6H,qBAAkBC,SAO3BO,EAAiB,SAACrI,GAAD,OAAsBA,EAAMV,GAAMsI,cACnD7F,EAAqB,SAAC/B,GAAD,OAAsBA,EAAMV,GAAMuI,iBACvDS,EAAkB,SAACtI,EAAkBE,GAAnB,OAAkCF,EAAMV,GAAMuI,kBAAoB3H,G,EAM7FX,EAAMyB,QAHN+G,E,EAAAA,YACAC,E,EAAAA,YACAC,E,EAAAA,cAGShH,EAAU1B,EAAM0B,S,mNCnDtB,SAASsH,EAAT,GAA4C,IAApBC,EAAmB,EAAnBA,SAC3B,OACI,qBAAK1C,UAAWJ,IAAO+C,MAAvB,SACKD,I,kBCDN,SAASE,EAAT,GAII,IAHPC,EAGM,EAHNA,MACAC,EAEM,EAFNA,SACA3C,EACM,EADNA,QAEA,OACI,wBACIH,UAAWJ,IAAOmD,OAClB5C,QAASA,EACT2C,SAAUA,EAHd,SAKKD,ICdN,SAASG,IACZ,IAAMC,EAAUjH,IAAY,SAAC9B,GAAD,OAAW+B,YAAmB/B,MACpD4I,GAAYG,EAEZC,EAAWC,KACXhD,EAAU9D,uBAAY,WACpB4G,GACAC,EAAStI,YAAY,CACjBR,GAAI6I,OAGb,CAACA,EAASC,IAEb,OACI,cAACN,EAAD,CACIC,MAAM,SACNC,SAAUA,EACV3C,QAASA,ICpBd,SAASiD,IACZ,OACI,cAACX,EAAD,UACI,cAACO,EAAD,MCFL,SAASK,IACZ,IACMP,GADW9G,GAAYsH,GAGvBJ,EAAWC,KAGjB,OACI,cAACP,EAAD,CACIC,MAAM,OACN1C,QALQ,kBAAM+C,EAASK,iBAAeC,SAMtCV,SAAUA,IAKtB,SAASQ,EAAWpJ,GAChB,cAAkBuJ,OAAOC,OAAOxJ,GAAhC,eAAwC,CAAnC,IACKyJ,EADI,KAGV,GAAIA,GAAOA,EAAIC,MAAQD,EAAIC,KAAKC,OAAS,EACrC,OAAO,EAIf,OAAO,ECzBJ,SAASC,IACZ,IACMhB,GADW9G,GAAY+H,GAGvBb,EAAWC,KAGjB,OACI,cAACP,EAAD,CACIC,MAAM,OACN1C,QALQ,kBAAM+C,EAASK,iBAAeS,SAMtClB,SAAUA,IAKtB,SAASiB,EAAW7J,GAChB,cAAkBuJ,OAAOC,OAAOxJ,GAAhC,eAAwC,CAAnC,IACKyJ,EADI,KAGV,GAAIA,GAAOA,EAAIM,QAAUN,EAAIM,OAAOJ,OAAS,EACzC,OAAO,EAIf,OAAO,ECzBJ,SAASK,IACZ,OACI,eAACzB,EAAD,WACI,cAACY,EAAD,IACA,cAACS,EAAD,OCJL,SAASK,IACZ,IAAMjB,EAAWC,KAGjB,OACI,cAACP,EAAD,CACIC,MAAM,QACN1C,QALQ,kBAAM+C,EAASjB,kBCH5B,SAASmC,IACZ,OACI,cAAC3B,EAAD,UACI,cAAC0B,EAAD,MCKL,IAAME,EAAUC,gBAAK,YAA2B,IAAxBtE,EAAuB,EAAvBA,UAC3B,OACI,sBAAKA,UAAWL,IAAWC,IAAOC,UAAWG,GAA7C,UACI,cAACoD,EAAD,IACA,cAACc,EAAD,IACA,cAACE,EAAD,U,uCCdCG,EAAW,SACpBC,EACAC,GACoC,IAAD,EACTC,mBAASF,GADA,mBAC5BG,EAD4B,KACrBC,EADqB,KAenC,OAZAC,qBAAU,kBAAMD,EAASJ,KAAe,CAACA,IAYlC,CAVM,CACTG,QACAG,SAAU,SAACxI,GACPsI,EAAStI,EAAMyI,OAAOJ,OAClBF,GACAA,EAASnI,EAAMyI,OAAOJ,SAO9BA,EACAC,I,iBCXD,SAASI,EAAT,GAMI,IALPnC,EAKM,EALNA,MACAoC,EAIM,EAJNA,IACAN,EAGM,EAHNA,MACAG,EAEM,EAFNA,SACAI,EACM,EADNA,QAEMC,EAiBV,SACIF,EACAH,GAEA,OAAOzI,uBAAY,SAACsI,GACZA,EAAMd,QAAUoB,GAChBH,EAASH,KAEd,CAACM,EAAKH,IAzBaM,CAAiBH,EAAKH,GADtC,EAESP,EAASI,EAAOQ,GAAxBE,EAFD,oBAIN,OACI,sBAAKrF,UAAWJ,IAAO0F,QAAvB,UACKzC,EAAQ,uBAAO7C,UAAWJ,IAAOiD,MAAzB,SAAiCA,IAAiB,KAC3D,mCACI7C,UAAWJ,IAAO2F,MAClBhK,KAAK,OACLiK,UAAWP,EACXC,QAASA,GACLG,OCbb,SAASI,EAAT,GAKI,IAJP5C,EAIM,EAJNA,MACA6C,EAGM,EAHNA,QACAf,EAEM,EAFNA,MAGMQ,EAoBV,SAA0BL,GACtB,OAAOzI,uBAAY,SAACsI,GACZG,GACAA,EAASH,KAEd,CAACG,IAzBkBM,CADhB,EADNN,UACM,EAEuBP,EAASI,EAAOQ,GAFvC,mBAECE,EAFD,KAEOM,EAFP,KAIAC,EAyBV,SAAoBF,GAChB,OAAOG,mBACH,kBAAMH,EAAQI,IAAIC,KAClB,CAACL,IA5BqBM,CAAWN,GAC/BO,EAuDV,SAAwBN,EAAsBD,GAC1C,OAAOG,mBACH,kBAKR,SAAwBF,EAAsBD,GAC1C,IAAMQ,EAASR,EAAQS,MAAK,SAAAD,GAAM,OAAIA,EAAOvB,QAAUgB,KACvD,OAAOO,EAASA,EAAOjG,MAAQ,KAPrBmG,CAAeT,EAAcD,KACnC,CAACC,EAAcD,IA1DCW,CAAeV,EAAcC,GAEjD,OACI,sBAAK5F,UAAWJ,IAAO0F,QAAvB,UACKzC,EAAQ,uBAAO7C,UAAWJ,IAAOiD,MAAzB,SAAiCA,IAAiB,KAC3D,gDACI7C,UAAWJ,IAAO0G,OAClBrG,MAAOgG,GACHZ,GAHR,aAKKO,EAAkBE,IAAIS,SAqBvC,SAASR,EAAgBG,GACrB,IAAIvB,EAAQ,KACR9B,EAAQ,KACR5C,OAAQ+B,EAcZ,MAZsB,kBAAXkE,GAAkC,OAAXA,QAAoClE,IAAjBkE,EAAOvB,OACxDA,EAAQuB,EAAOvB,MACf9B,EAAQqD,EAAOrD,MACf5C,EAAQiG,EAAOjG,OAEf0E,EAAQuB,EAAS,GAGP,OAAVrD,QAA4Bb,IAAVa,IAClBA,EAAQ8B,GAGL,CACHA,QACA9B,QACA5C,SAgBR,SAASsG,EAAT,GAA0D,IAAhC5B,EAA+B,EAA/BA,MAAO9B,EAAwB,EAAxBA,MAAO5C,EAAiB,EAAjBA,MACpC,OACI,wBAEID,UAAWJ,IAAOsG,OAClBvB,MAAOA,EACP1E,MAAOA,EAJX,SAMK4C,GALI8B,G,qBCzFV,SAAS6B,EAAT,GAA4C,IAA3BC,EAA0B,EAA1BA,MAAO/D,EAAmB,EAAnBA,SAC3B,OACI,gCACI,oBAAI1C,UAAWJ,IAAO6G,MAAtB,SAA8BA,IAC7B/D,K,qBCJN,SAASgE,EAAT,GAAoD,IAA3BD,EAA0B,EAA1BA,MAAO/D,EAAmB,EAAnBA,SACnC,OACI,sBAAK1C,UAAWJ,IAAOC,UAAvB,UACK4G,EAAQ,oBAAIzG,UAAWJ,IAAO6G,MAAtB,SAA8BA,IAAc,KACpD/D,KCJN,SAASiE,IACZ,OACI,cAACH,EAAD,CAAOC,MAAM,QAAb,SACI,cAACG,EAAD,MAKZ,SAASA,IACL,IAAM1D,EAAWC,KACX0D,EAAU7K,GAAY8K,cACtBC,EAAO/K,GAAYgL,WAEnBC,EAAiB5K,uBAAY,SAACwK,GAChC3D,EAASgE,gCAAsB,CAC3BL,UACAE,YAEL,CAAC7D,EAAU6D,IAERI,EAAc9K,uBAAY,SAAC0K,GAC7B7D,EAASgE,gCAAsB,CAC3BL,UACAE,YAEL,CAAC7D,EAAU2D,IAEd,OACI,eAACH,EAAD,WACI,cAACU,EAAD,CACIvE,MAAM,UACN8B,MAAOkC,EACP/B,SAAUmC,IAEd,cAACG,EAAD,CACIvE,MAAM,OACN8B,MAAOoC,EACPjC,SAAUqC,OAY1B,SAASC,EAAT,GAI0B,IAHtBvE,EAGqB,EAHrBA,MACA8B,EAEqB,EAFrBA,MACAG,EACqB,EADrBA,SAEMY,EAAU2B,IAAMC,iBAAgBC,iBAAiB,GACvD,OACI,cAAC9B,EAAD,CACI5C,MAAOA,EACP6C,QAASA,EACTf,MAAOA,EAAQ,GACfG,SAAUA,IC3Df,SAAS0C,EAAT,GAA0C,IAAdpN,EAAa,EAAbA,GACzB8B,EAASF,IAAY,SAAA9B,GAAU,IAAD,EAC1BgC,EAAM,UAAGlB,YAAcd,EAAOE,UAAxB,aAAG,EAA0B8B,OACzC,OAAOA,GAAkB,MAGvBgH,EAAWC,KACX2B,EAAWzI,uBAAY,SAACH,GAC1BgH,EAAS1I,YAAY,CACjBJ,KACA8B,cAEL,CAACgH,EAAU9I,IAId,OACI,cAAC4K,EAAD,CACInC,MAAM,SACNoC,IAAK,EACLN,MAAOzI,EACP4I,SAAUA,EACVI,QARQ,SAAC5I,GAAD,OAA4BA,EAAMyI,OAAOuB,Y,YCjBvDpJ,EAAS,CACXuK,EAAY,SAAU,WACtBA,EAAY,MAAO,WACnBA,EAAY,SAAU,WACtBA,EAAY,OAAQ,WACpBA,EAAY,QAAS,WACrBA,EAAY,OAAQ,WACpBA,EAAY,cAAe,WAC3BA,EAAY,WAAY,WACxBA,EAAY,cAAe,WAC3BA,EAAY,YAAa,WACzBA,EAAY,aAAc,WAC1BA,EAAY,YAAa,YAG7B,SAASA,EAAY5E,EAAe1G,GAChC,MAAO,CACH0G,QACA8B,MAAO+C,EAAevL,GACtB8D,MAAO,CACH3C,gBAAiBnB,EACjBA,MAAOwB,YAAaxB,KAKhC,SAASuL,EAAevL,GACpB,OAAOA,EAAQA,EAAMwL,cAAgB,KAQlC,SAASC,EAAT,GAA6C,IAAdxN,EAAa,EAAbA,GAC5B+B,EAAQH,IAAY,SAAA9B,GAAU,IAAD,EAE/B,OAAOwN,EADI,UAAG1M,YAAcd,EAAOE,UAAxB,aAAG,EAA0B+B,UAItC+G,EAAWC,KACX2B,EAAWzI,uBAAY,SAACF,GAC1B+G,EAAS1I,YAAY,CACjBJ,KACA+B,aAEL,CAAC+G,EAAU9I,IAEd,OAAO+B,EACH,cAACsJ,EAAD,CACI5C,MAAM,QACN6C,QAASxI,EACTyH,MAAOxI,EACP2I,SAAUA,IAEd,KCzDR,IAAM+C,EAAa,CACf,CAAEhF,MAAO,qBAAY8B,MAAOpL,IAAUoD,OACtC,CAAEkG,MAAO,oBAAW8B,MAAOpL,IAAU0D,MACrC,CAAE4F,MAAO,qBAAY8B,MAAOpL,IAAUsD,OACtC,CAAEgG,MAAO,oBAAW8B,MAAOpL,IAAUwD,MACrC,CAAE8F,MAAO,OAAQ8B,MAAOpL,IAAUoB,OAO/B,SAASmN,GAAT,GAAiD,IAAd1N,EAAa,EAAbA,GAChCM,EAAYsB,IAAY,SAAA9B,GAAU,IAAD,EAC7BQ,EAAS,UAAGM,YAAcd,EAAOE,UAAxB,aAAG,EAA0BM,UAC5C,OAAOA,GAAwBnB,IAAUoB,QAGvCuI,EAAWC,KACX2B,EAAWzI,uBAAY,SAAC3B,GAC1BwI,EAAS1I,YAAY,CACjBJ,KACAM,iBAEL,CAACwI,EAAU9I,IAEd,OACI,cAACqL,EAAD,CACI5C,MAAM,YACN6C,QAASmC,EACTlD,MAAOjK,EACPoK,SAAUA,IC1Bf,SAASiD,GAAT,GAAoC,IAAd3N,EAAa,EAAbA,GACzB,OACI,cAACoM,EAAD,CAAOC,MAAM,QAAb,SACI,eAACC,EAAD,WACI,cAACc,EAAD,CAAkBpN,GAAIA,IACtB,cAACwN,EAAD,CAAqBxN,GAAIA,IACzB,cAAC0N,GAAD,CAAyB1N,GAAIA,S,2BCJhC4N,GAAiB1D,gBAAK,YAA0B,IAAvBtE,EAAsB,EAAtBA,UAC5B+B,EAAkB/F,YAAYC,KAEpC,OACI,qBAAK+D,UAAWL,IAAWC,KAAOC,UAAWG,GAA7C,SACK+B,EACK,cAACgG,GAAD,CAAY3N,GAAI2H,IAChB,cAAC4E,EAAD,S,iBCbLsB,GAAQC,aAAe,CAChC/M,SAAO,sBACFgN,IAASC,KADP,gBAEFC,OAAQC,WAFN,gBAGFC,IAAOC,KAHL,MAUJ,SAASxM,GACZyM,EACAC,GAEA,OAAOC,YAAeF,EAAUC,GAG7B,IAAMvF,GAAc,kBAAMyF,e,0BCf1B,SAASC,KACZ,IAAMC,EAAQ9M,GAAYuG,KACpBtC,EAWV,SAAgC6I,GAC5B,IACMC,EAAaD,EAAQ,QAAU,MAErC,MAAO,CACHE,oBAAoB,GAAD,OAJJ,OAII,YAAmBD,IAhB5B/K,CAAuB8K,GAErC,OACI,sBAAK9I,UAAWJ,KAAOC,UAAWI,MAAOA,EAAzC,UACI,cAACoE,EAAD,CAASrE,UAAWJ,KAAOqJ,UAC3B,cAAC,QAAD,CAAOjJ,UAAWJ,KAAOyI,QACxBS,EAAQ,cAACd,GAAD,CAAgBhI,UAAWJ,KAAOsJ,aAAiB,QCRjE,SAASC,KACZ,OACI,cAAC,aAAD,UACI,cAAC,IAAD,CAAUlB,MAAOA,GAAjB,SACI,cAAC,IAAD,UACI,cAACY,GAAD,UASpBZ,GAAM/E,SAASgE,gCAAsB,CACjCL,QAAS,EACTE,KAAM,KAGVkB,GAAM/E,SAASjJ,YAAY,CACvBkC,MAAO,UACPD,OAAQ,IACRxB,UAAWnB,IAAUwD,QAGzBkL,GAAM/E,SAASkG,oBAAU,CACrBhP,GAAI,IACJsH,EAAG,EACHC,EAAG,KAGPsG,GAAM/E,SAASjJ,YAAY,CACvBkC,MAAO,UACPD,OAAQ,IACRxB,UAAWnB,IAAUsD,SAGzBoL,GAAM/E,SAASkG,oBAAU,CACrBhP,GAAI,IACJsH,EAAG,EACHC,EAAG,KAGPsG,GAAM/E,SAASjJ,YAAY,CACvBkC,MAAO,UACPD,OAAQ,IACRxB,UAAWnB,IAAUsD,SAGzBoL,GAAM/E,SAASkG,oBAAU,CACrBhP,GAAI,IACJsH,EAAG,EACHC,EAAG,KAGPsG,GAAM/E,SAASjJ,YAAY,CACvBkC,MAAO,UACPD,OAAQ,IACRxB,UAAWnB,IAAUsD,SAGzBoL,GAAM/E,SAASkG,oBAAU,CACrBhP,GAAI,IACJsH,EAAG,EACHC,EAAG,KAGPsG,GAAM/E,SAASjJ,YAAY,CACvBkC,MAAO,UACPD,OAAQ,IACRxB,UAAWnB,IAAUwD,QAGzBkL,GAAM/E,SAASkG,oBAAU,CACrBhP,GAAI,IACJsH,EAAG,EACHC,EAAG,KAGPsG,GAAM/E,SAASjJ,YAAY,CACvBkC,MAAO,UACPD,OAAQ,IACRxB,UAAWnB,IAAUoD,SAGzBsL,GAAM/E,SAASkG,oBAAU,CACrBhP,GAAI,IACJsH,EAAG,EACHC,EAAG,KAGPsG,GAAM/E,SAASjJ,YAAY,CACvBkC,MAAO,UACPD,OAAQ,GACRxB,UAAWnB,IAAUoB,QAGzBsN,GAAM/E,SAASkG,oBAAU,CACrBhP,GAAI,IACJsH,EAAG,EACHC,EAAG,KAGPsG,GAAM/E,SAASjJ,YAAY,CACvBkC,MAAO,UACPD,OAAQ,GACRxB,UAAWnB,IAAUoB,QAGzBsN,GAAM/E,SAASkG,oBAAU,CACrBhP,GAAI,IACJsH,EAAG,EACHC,EAAG,KAGPsG,GAAM/E,SAASjJ,YAAY,CACvBkC,MAAO,UACPD,OAAQ,GACRxB,UAAWnB,IAAUoB,QAGzBsN,GAAM/E,SAASkG,oBAAU,CACrBhP,GAAI,IACJsH,EAAG,EACHC,EAAG,KAGPsG,GAAM/E,SAASjJ,YAAY,CACvBkC,MAAO,UACPD,OAAQ,GACRxB,UAAWnB,IAAUoB,QAGzBsN,GAAM/E,SAASkG,oBAAU,CACrBhP,GAAI,IACJsH,EAAG,EACHC,EAAG,KAGPsG,GAAM/E,SAASK,iBAAe8F,iB,qBCnJ9BC,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,qBAAqB,MAAQ,qBAAqB,OAAS,wB,kBCAtHD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,OAAS,0BAA0B,UAAY,6BAA6B,SAAW,4BAA4B,QAAU,2BAA2B,MAAQ,yBAAyB,MAAQ,yBAAyB,KAAO,wBAAwB,KAAO,0B,6BCD3T,sVAMajC,EAAiB,EACjBC,EAAiB,IAQxB3N,EAAsB,CACxBiN,QAAS,EACTE,KAAM,EACNyC,MAAO,CAAE,CAAEC,EAAW,EAAG,MAGhBjQ,EAAO,QAEdC,EAAQC,YAAY,CACtBC,KAAMH,EACNI,eACAI,SAAU,CAENkN,sBAFM,SAEgBhN,EAAOC,GACzB,IAAM0M,EAAU6C,EAAmBvP,EAAOG,QAAQuM,SAC5CE,EAAO2C,EAAmBvP,EAAOG,QAAQyM,MAIzC4C,EAAc9C,EAAU3M,EAAM2M,QAEhC8C,EAAc,EAkD9B,SAAqBzP,EAAc0P,GAI/B,IAHA,IAAMC,EAAe3P,EAAM2M,QACrBiD,EAAa5P,EAAM2M,QAAU+C,EAE1BlI,EAAImI,EAAcnI,EAAIoI,EAAYpI,IAAK,CAC5CxH,EAAMsP,MAAM9H,GAAK,GAEjB,IAAK,IAAIC,EAAI,EAAGA,EAAIzH,EAAM6M,KAAMpF,IAC5BzH,EAAMsP,MAAM9H,GAAGC,GAAK8H,EAAW/H,EAAGC,IAzD9BoI,CAAY7P,EAAOyP,GACZA,EAAc,GAqFrC,SAAuBzP,EAAc8P,GAIjC,IAHA,IAAMH,EAAe3P,EAAM2M,QAAUmD,EAC/BF,EAAa5P,EAAM2M,QAEhBnF,EAAImI,EAAcnI,EAAIoI,EAAYpI,IACvC,IAAK,IAAIC,EAAI,EAAGA,EAAIzH,EAAM6M,KAAMpF,IAAK,CACjC,IAAMsB,EAAU/I,EAAMsP,MAAM9H,GAAGC,GAE/BsI,QAAQC,IAAI,qBAAsBjH,GAI1C/I,EAAMsP,MAAMzO,OAAO8O,EAAcG,GAhGrBG,CAAcjQ,EAAOkQ,KAAKC,IAAIV,IAGlCzP,EAAM2M,QAAUA,EAIhB,IAAMyD,EAAWvD,EAAO7M,EAAM6M,KAE1BuD,EAAW,EAgE3B,SAAkBpQ,EAAc0P,GAI5B,IAHA,IAAMW,EAAYrQ,EAAM6M,KAClByD,EAAUtQ,EAAM6M,KAAO6C,EAEpBlI,EAAI,EAAGA,EAAIxH,EAAM2M,QAASnF,IAC/B,IAAK,IAAIC,EAAI4I,EAAW5I,EAAI6I,EAAS7I,IACjCzH,EAAMsP,MAAM9H,GAAGC,GAAK8H,EAAW/H,EAAGC,GArE9B8I,CAASvQ,EAAOoQ,GACTA,EAAW,GAwFlC,SAAoBpQ,EAAc8P,GAI9B,IAHA,IAAMO,EAAYrQ,EAAM6M,KAAOiD,EACzBQ,EAAUtQ,EAAM6M,KAEbrF,EAAI,EAAGA,EAAIxH,EAAM2M,QAASnF,IAAK,CACpC,IAAK,IAAIC,EAAI4I,EAAW5I,EAAI6I,EAAS7I,IAAK,CACtC,IAAMsB,EAAU/I,EAAMsP,MAAM9H,GAAGC,GAE/BsI,QAAQC,IAAI,qBAAsBjH,GAGtC/I,EAAMsP,MAAM9H,GAAG3G,OAAOwP,EAAWP,IAlGzBU,CAAWxQ,EAAOkQ,KAAKC,IAAIC,IAG/BpQ,EAAM6M,KAAOA,GAGjBqC,UA/BM,SA+BIlP,EAAOC,GAA8D,IAAD,EACrDA,EAAOG,QAApBF,EADkE,EAClEA,GAAIsH,EAD8D,EAC9DA,EAAGC,EAD2D,EAC3DA,EACfgJ,EAAYzQ,EAAOE,GACnBF,EAAMsP,MAAM9H,GAAGC,GAAGsB,QAAU7I,IAIpCgI,cAAe,SAACC,GAEZA,EAAQC,QAAQ1H,KAAa,SAACV,EAAOC,GAEjCwQ,EAAYzQ,EADGC,EAAOG,QAAdF,UAOpB,SAASsP,EAAmB/E,GACxB,OAAOyF,KAAKnF,IAAIqC,EAAgB8C,KAAKQ,IAAIrD,EAAgB5C,IAG7D,SAAS8E,EAAW/H,EAAWC,EAAWsB,GACtC,MAAO,CACHvB,IACAC,IACAsB,WAiBR,SAAS0H,EAAYzQ,EAAcE,GAC/B,IAAK,IAAIsH,EAAI,EAAGA,EAAIxH,EAAM2M,QAASnF,IAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIzH,EAAM6M,KAAMpF,IAAK,CACjC,IAAMkJ,EAAO3Q,EAAMsP,MAAM9H,GAAGC,GAE5B,GAAIkJ,EAAK5H,UAAY7I,EAAI,CACrByQ,EAAK5H,aAAUjB,EACf,QA+CT,IAAM8E,EAAa,SAAC5M,GAAD,OAAsBA,EAAMV,GAAMyB,QAAQ4L,SACvDG,EAAU,SAAC9M,GAAD,OAAsBA,EAAMV,GAAMyB,QAAQ8L,MACpD+D,EAAwB,SAAC5Q,EAAkBwH,EAAWC,GAC/D,IAAMoJ,EAAS7Q,EAAMV,GAAMyB,QAAQuO,MAAM9H,GACzC,OAAOqJ,EAASA,EAAOpJ,QAAKK,G,EAM5BvI,EAAMyB,QAFNgM,E,EAAAA,sBACAkC,E,EAAAA,UAGSjO,EAAUC,IAAS3B,EAAM0B,QAAS,CAC3CE,OAAQC,wBAAc,CAClB4L,EAAsB3L,KACtB6N,EAAU7N,OAEdyP,QAASC,6BAAmB,CACxB/D,EAAsB3L,U,kBC1K9B+N,EAAOC,QAAU,CAAC,UAAY,2BAA2B,MAAQ,uBAAuB,OAAS,0B,oBCAjGD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,SAAW,uBAAuB,WAAa,yBAAyB,UAAY,0B,gBCAhID,EAAOC,QAAU,CAAC,UAAY,0BAA0B,QAAU,wBAAwB,MAAQ,sBAAsB,WAAa,6B,uKCG9H,SAAS2B,IAAmB,IAAD,EAM1BC,aAAa,SAAAlK,GAAO,MAAK,CACzBH,KAAMG,EAAQmK,UACdC,SAAUpK,EAAQqK,cAClBC,cAAetK,EAAQuK,wBACvBrK,WAAYF,EAAQE,iBARpBL,EAF0B,EAE1BA,KACAuK,EAH0B,EAG1BA,SACAE,EAJ0B,EAI1BA,cASJ,IAb8B,EAK1BpK,aAQgBoK,EAChB,OAAO,KAEX,IAAMlK,EAaV,SAAuB9F,EAAWuF,EAAWU,GACzC,OAAQjG,GACJ,KAAKoF,IACD,OAAO,cAAC,IAAD,aAAuBa,OAAQA,GAAYV,IACtD,QACI,OAAO,MAlBC2K,CAAcJ,EAAUvK,EAAMyK,GAE9C,OAAKlK,EAKD,qBAAKrB,UAAWJ,IAAO8L,MAAvB,SACKrK,IALE,KCXR,SAASsK,EAAT,GAA2C,IAApBjJ,EAAmB,EAAnBA,SAC1B,OACI,eAAC,IAAD,CAAUkJ,QAASC,IAAnB,UACI,cAACX,EAAD,IACCxI,K,WCbPoJ,EAAQ,IAAIC,MAGX,SAASzK,EAAkBD,GAC9BwD,qBAAU,WACNxD,EAAQyK,EAAO,CAAEE,sBAAsB,MACxC,CAAC3K,IALRyK,EAAMG,IAAM,8E,oFCFNC,EAAa,UACbC,EAAa,UAEZ,SAASxO,EAAaxB,GAEzB,OADkBiB,IAAOgP,SAASF,EAAY/P,IAAUiB,IAAOgP,SAASD,EAAYhQ,GACjE+P,EAAaC,I,qBCNpC7C,EAAOC,QAAU,CAAC,OAAS,+BAA+B,SAAW,mC,kBCArED,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,YAAc,6B,gBCA7DD,EAAOC,QAAU,CAAC,UAAY,iCAAiC,MAAQ,+B,0LCShE,SAAS8C,EAAT,GAGI,IAFPjS,EAEM,EAFNA,GACAqB,EACM,EADNA,KAEMM,EAAWC,aAAY,SAAC9B,GAAD,OAAWsI,YAAgBtI,EAAOE,MAEzD8I,EAAWC,cACXzH,EAiBV,SAA8BK,EAAmBmH,GAC7C,OAAO7G,uBAAY,SAACjC,GAIZ8I,EAHCnH,EAGQoG,cAFAD,YAAY,CAAE9H,UAI5B,CAAC8I,EAAUnH,IAxBOuQ,CAAqBvQ,EAAUmH,GAC9CvH,EA0BV,SAAkCI,EAAmBmH,GACjD,OAAO7G,uBAAY,SAACjC,EAAIM,GAEhBwI,EADAnH,EACStB,YAAqB,CAAEL,KAAIM,cAE3BwH,YAAY,CAAE9H,UAE5B,CAAC2B,EAAUmH,IAjCWqJ,CAAyBxQ,EAAUmH,GAEtDjD,EAkCV,SAAgCxE,GAI5B,MAAO,CACH+Q,SAAU,WACVjO,KAAM,OACND,IAAK,OACLR,MAPUrC,EAAO,KAQjBsC,OAPWtC,EAAO,MApCRuC,CAAuBvC,GAErC,OACI,qBAAKwE,MAAOA,EAAZ,SACI,cAAC,IAAD,CACI7F,GAAIA,EACJqB,KAAMA,EACNC,aAAcA,EACdC,iBAAkBA,M,qBCX3B,SAAS8Q,EAAT,GAMI,IAAD,EALN/K,EAKM,EALNA,EACAC,EAIM,EAJNA,EACAlG,EAGM,EAHNA,KACAiR,EAEM,EAFNA,SACAC,EACM,EADNA,WAEM9B,EAAO7O,aAAY,SAAC9B,GAAD,OAAW4Q,YAAsB5Q,EAAOwH,EAAGC,MAC9DsB,EAAO,OAAG4H,QAAH,IAAGA,OAAH,EAAGA,EAAM5H,QAFhB,EA6BV,SAAsBvB,EAAWC,EAAWmK,GACxC,IAAM5I,EAAWC,cAEjB,OAAOyJ,aAAQ,iBAAO,CAClBC,OAAQlM,IACRmM,QAAS,kBAAMhB,GACfiB,KAAM,SAACjM,GAAD,OAAwBoC,EAASkG,YAAU,CAAE1H,IAAGC,IAAGvH,GAAI0G,EAAK1G,OAClE4G,QAAS,SAACC,GAAD,MAAc,CACnB+L,SAAU/L,EAAQ+L,SAClBF,UAAW7L,EAAQ6L,eAEvB,CAACpL,EAAGC,EAAGmK,EAAO5I,IAnCkB+J,CAAavL,EAAGC,OAF1BK,IAAZiB,GAHR,0BAKG+J,EALH,EAKGA,OAAQF,EALX,EAKWA,QAAWC,EALtB,KAOA/M,EAAYL,IACdC,IAAOiL,MADiB,mBAGnBjL,IAAO8M,SAAWA,GAHC,cAInB9M,IAAO+M,WAAaA,GAJD,cAKnB/M,IAAOsN,UAAYF,GAAUF,GALV,IAStB7M,EA2BV,SAAuBkN,GACnB,IAAM1R,EAAO0R,EAAW,KACxB,MAAO,CACHrP,MAAOrC,EACPsC,OAAQtC,GA/BEoG,CAAcpG,GAE5B,OACI,qBACIyE,IAAK6M,EACL/M,UAAWA,EACXC,MAAOA,EAHX,SAKKgD,EAAU,cAACoJ,EAAD,CAAWjS,GAAI6I,EAASxH,KAAMA,IAAW,OCtCzD,SAAS2R,EAAT,GAAoC,IAApBD,EAAmB,EAAnBA,SACbtG,EAAU7K,YAAY8K,KACtBC,EAAO/K,YAAYgL,KAEnB/G,EAUV,SAA2B4G,EAAiBE,EAAcoG,GACtD,MAAO,CACHrP,MAAQ+I,EAAUsG,EAAY,KAC9BpP,OAASgJ,EAAOoG,EAAY,MAblBE,CAAkBxG,EAASE,EAAMoG,GACzC3D,EAgBV,SAAuB3C,EAAiBE,EAAcoG,GAGlD,IAFA,IAAM3D,EAAQ,GAEL7H,EAAI,EAAGA,EAAIoF,EAAMpF,IAGtB,IAFA,IAAM+K,EAAiB,IAAN/K,EAERD,EAAI,EAAGA,EAAImF,EAASnF,IAAK,CAC9B,IAAMiL,EAAajL,IAAMmF,EAAU,EAEnC2C,EAAMjP,KACF,cAACkS,EAAD,CAEI/K,EAAGA,EACHC,EAAGA,EACHlG,KAAM0R,EACNT,SAAUA,EACVC,WAAYA,GALPjL,EAAI,IAAMC,IAW/B,OAAO6H,EAtCO8D,CAAczG,EAASE,EAAMoG,GAE3C,OACI,qBAAKnN,UAAWJ,IAAO2N,KAAMtN,MAAOA,EAApC,SACKuJ,I,qBCLAgE,EAAQlJ,gBAAK,YAA0B,IAAvBtE,EAAsB,EAAtBA,UACnBkD,EAAWC,cAGjB,OACI,qBAAKnD,UAAWL,IAAWC,IAAOyI,MAAOrI,GAAzC,SACI,qBACIA,UAAWJ,IAAO6N,YAClBtN,QANY,kBAAM+C,EAASf,gBAI/B,SAII,cAACiL,EAAD,CAAMD,SAhBC,c,iBCNvB7D,EAAOC,QAAU,CAAC,MAAQ,iC,gBCA1BD,EAAOC,QAAU,CAAC,KAAO,qB,iBCAzBD,EAAOC,QAAU,CAAC,MAAQ,uB,gBCA1BD,EAAOC,QAAU,CAAC,UAAY,oC,8BCD9B,0CAGAmE,IAASC,OAAO,cAAC,IAAD,IAASC,SAASC,eAAe,U","file":"static/js/main.f941a7dd.chunk.js","sourcesContent":["export enum Direction {\n    North = 'north',\n    South = 'south',\n    West = 'west',\n    East = 'east',\n    None = 'none'\n}\n\nexport interface Token {\n    id: string\n    color: string\n    symbol: string\n    direction: Direction\n}\n\nexport interface TokenCreate {\n    color: string\n    symbol: string\n    direction: Direction\n}\n\nexport interface TokenUpdate {\n    id: string\n    color?: string\n    symbol?: string\n    direction?: Direction\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport undoable, { includeAction } from 'redux-undo'\nimport { RootState } from '../app'\nimport { Token, TokenCreate, TokenUpdate, Direction } from './types'\n\nexport const NAME = 'tokens'\n\ninterface State {\n    nextTokenId: number\n    ids: string[]\n    entities: { [id: string]: Token }\n}\n\nconst initialState: State = {\n    nextTokenId: 0,\n    ids: [],\n    entities: {}\n}\n\nconst slice = createSlice({\n    name: NAME,\n    initialState,\n    reducers: {\n\n        createToken(state, action: PayloadAction<TokenCreate>) {\n            const id = (state.nextTokenId++) + ''\n            const token = { id, ...action.payload }\n            state.ids.push(id)\n            state.entities[id] = token\n        },\n\n        updateToken(state, action: PayloadAction<TokenUpdate>) {\n            const id = action.payload.id\n            const token = state.entities[id]\n\n            if (token) {\n                state.entities[id] = {\n                    ...token,\n                    ...action.payload\n                }\n            }\n        },\n\n        toggleTokenDirection(state, action: PayloadAction<{ id: string, direction: Direction }>) {\n            const { id, direction } = action.payload\n            const token = state.entities[id]\n\n            if (!token) {\n                return\n            }\n\n            if (token.direction !== direction) {\n                token.direction = direction\n            } else {\n                token.direction = Direction.None\n            }\n        },\n\n        deleteToken(state, action: PayloadAction<{ id: string }>) {\n            const { id } = action.payload\n            const index = state.ids.indexOf(id)\n\n            if (index > -1) {\n                state.ids.splice(index, 1)\n                delete state.entities[id]\n            }\n        }\n\n    }\n})\n\nexport const getTokenIds = (state: RootState) => state[NAME].present.ids\nexport const findTokenById = (state: RootState, id: string): Token | undefined => state[NAME].present.entities[id]\n\nexport const {\n    createToken,\n    updateToken,\n    toggleTokenDirection,\n    deleteToken\n} = slice.actions\n\nexport const reducer = undoable(slice.reducer, {\n    filter: includeAction([\n        createToken.type,\n        updateToken.type,\n        toggleTokenDirection.type,\n        deleteToken.type\n    ])\n})\n","import { useCallback, MouseEvent } from 'react'\nimport chroma from 'chroma-js'\nimport classNames from 'classnames'\nimport { useSelector } from '../app'\nimport { getTextColor } from '../shared'\nimport { getSelectedTokenId } from '../view'\nimport { findTokenById } from './state'\nimport { Direction } from './types'\nimport styles from './BaseToken.module.css'\n\ntype Props = {\n    id: string\n    size: number\n    onTokenClick?: (id: string) => void\n    onDirectionClick?: (id: string, direction: Direction) => void\n    circleRef?: any\n    containerClassName?: string\n    circleClassName?: string\n}\n\ntype DirectionProps = {\n    direction: Direction\n    currentDirection: Direction\n    onClick: (event: MouseEvent) => void\n    className: string\n    style: any\n}\n\nexport function BaseToken({\n    id,\n    size,\n    onTokenClick,\n    onDirectionClick,\n    circleRef,\n    containerClassName,\n    circleClassName\n}: Props) {\n    // State\n    const selected = useSelector(state => getSelectedTokenId(state) === id)\n    const token = useSelector(state => findTokenById(state, id))\n    const symbol = token ? token.symbol : ''\n    const color = token ? token.color : '#ffffff'\n    const direction = token ? token.direction : Direction.None\n\n    // Event handlers\n    const onCircleClick = useCircleClick(id, onTokenClick)\n    const onNorthClick = useDirectionClick(Direction.North, id, onDirectionClick)\n    const onSouthClick = useDirectionClick(Direction.South, id, onDirectionClick)\n    const onWestClick = useDirectionClick(Direction.West, id, onDirectionClick)\n    const onEastClick = useDirectionClick(Direction.East, id, onDirectionClick)\n\n    // Styling\n\n    const colors = generateColors(color)\n    const containerStyle = generateContainerStyle(size)\n    const circleStyle = generateCircleStyle(colors)\n    const northStyle = generateNorthStyle(size, colors)\n    const southStyle = generateSouthStyle(size, colors)\n    const westStyle = generateWestStyle(size, colors)\n    const eastStyle = generateEastStyle(size, colors)\n\n    const containerClasses = classNames(\n        styles.container,\n        { [styles.selected]: selected },\n        containerClassName\n    )\n\n    const circleClasses = classNames(\n        styles.circle,\n        circleClassName\n    )\n\n    // JSX\n\n    return (\n        <div\n            className={containerClasses}\n            style={containerStyle}\n        >\n\n            <div\n                ref={circleRef}\n                onClick={onCircleClick}\n                className={circleClasses}\n                style={circleStyle}\n            >\n                <span>{symbol}</span>\n            </div>\n\n            <DirectionNode\n                direction={Direction.North}\n                currentDirection={direction}\n                onClick={onNorthClick}\n                className={styles.north}\n                style={northStyle}\n            />\n\n            <DirectionNode\n                direction={Direction.South}\n                currentDirection={direction}\n                onClick={onSouthClick}\n                className={styles.south}\n                style={southStyle}\n            />\n\n            <DirectionNode\n                direction={Direction.West}\n                currentDirection={direction}\n                onClick={onWestClick}\n                className={styles.west}\n                style={westStyle}\n            />\n\n            <DirectionNode\n                direction={Direction.East}\n                currentDirection={direction}\n                onClick={onEastClick}\n                className={styles.east}\n                style={eastStyle}\n            />\n\n        </div>\n    )\n}\n\nfunction DirectionNode({\n    direction,\n    currentDirection,\n    onClick,\n    className,\n    style\n}: DirectionProps) {\n    const current = direction === currentDirection\n    return (\n        <div\n            onClick={onClick}\n            className={classNames(className, styles.direction, { [styles.current]: current })}\n            style={style}\n        />\n    )\n}\n\n// Event handlers\n\nfunction useCircleClick(\n    id: string,\n    onTokenClick?: (id: string) => void\n) {\n    return useCallback((event) => {\n        if (onTokenClick) {\n            event.stopPropagation()\n            onTokenClick(id)\n        }\n    }, [id, onTokenClick])\n}\n\nfunction useDirectionClick(\n    direction: Direction, id: string,\n    onDirectionClick?: (id: string, direction: Direction) => void\n) {\n    return useCallback((event) => {\n        if (onDirectionClick) {\n            event.stopPropagation()\n            onDirectionClick(id, direction)\n        }\n    }, [direction, id, onDirectionClick])\n}\n\n// Styling\n\ntype Colors = {\n    backgroundColor: string\n    borderColor: string\n    textColor: string\n}\n\nfunction generateColors(color: string): Colors {\n    const chromaticity = chroma(color).get('lch.c')\n    const saturate = chromaticity > 10 ? 2 : 0\n\n    return {\n        backgroundColor: color,\n        borderColor: chroma(color).darken(2).saturate(saturate).hex(),\n        textColor: getTextColor(color)\n    }\n}\n\nfunction generateContainerStyle(size: number) {\n    return {\n        width: size + 'px',\n        height: size + 'px'\n    }\n}\n\nfunction generateCircleStyle(colors: Colors) {\n    return {\n        backgroundColor: colors.backgroundColor,\n        borderColor: colors.borderColor,\n        color: colors.textColor\n    }\n}\n\nfunction generateNorthStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        top: 0,\n        left: generatePosition(size),\n        borderLeftWidth: borderWidth,\n        borderRightWidth: borderWidth,\n        borderBottomWidth: borderWidth,\n        borderBottomColor: colors.borderColor\n    }\n}\n\nfunction generateSouthStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        bottom: 0,\n        left: generatePosition(size),\n        borderLeftWidth: borderWidth,\n        borderRightWidth: borderWidth,\n        borderTopWidth: borderWidth,\n        borderTopColor: colors.borderColor\n    }\n}\n\nfunction generateWestStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        top: generatePosition(size),\n        left: 0,\n        borderTopWidth: borderWidth,\n        borderBottomWidth: borderWidth,\n        borderRightWidth: borderWidth,\n        borderRightColor: colors.borderColor\n    }\n}\n\nfunction generateEastStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        top: generatePosition(size),\n        right: 0,\n        borderTopWidth: borderWidth,\n        borderBottomWidth: borderWidth,\n        borderLeftWidth: borderWidth,\n        borderLeftColor: colors.borderColor\n    }\n}\n\nfunction generateBorderWidth(size: number) {\n    return ((size / 10) * 3) + 'px'\n}\n\nfunction generatePosition(size: number) {\n    return (size / 5) + 'px'\n}\n","import { useDrag } from 'react-dnd'\nimport classNames from 'classnames'\nimport { useDisablePreview } from '../dnd'\nimport { BaseToken } from './BaseToken'\nimport { Direction } from './types'\nimport styles from './DraggableToken.module.css'\n\ntype Props = {\n    id: string\n    size: number\n    onTokenClick?: (id: string) => void\n    onDirectionClick?: (id: string, direction: Direction) => void\n}\n\nexport const TOKEN_DND_TYPE = 'Token'\n\nexport interface TokenDndItem {\n    id: string\n    size: number\n}\n\nexport function DraggableToken(props: Props) {\n    const { id, size } = props\n\n    const item: TokenDndItem = { id, size }\n\n    const [{ dragging }, drag, preview] = useDrag(() => ({\n        type: TOKEN_DND_TYPE,\n        item,\n        collect: (monitor) => ({ dragging: !!monitor.isDragging() })\n    }), [id, size])\n\n    useDisablePreview(preview)\n\n    const containerClassName = classNames({\n        [styles.dragging]: dragging\n    })\n\n    return (\n        <BaseToken\n            {...props}\n            circleRef={drag}\n            containerClassName={containerClassName}\n            circleClassName={styles.circle}\n        />\n    )\n}\n","import { XYCoord } from 'react-dnd'\nimport { BaseToken } from './BaseToken'\n\ntype Props = {\n    id: string\n    size: number\n    offset: XYCoord\n}\n\nexport function DraggableTokenPreview({\n    id,\n    size,\n    offset\n}: Props) {\n    const style = generateStyle(size, offset)\n    return (\n        <div style={style}>\n            <BaseToken\n                id={id}\n                size={size}\n            />\n        </div>\n    )\n}\n\nfunction generateStyle(size: number, offset: XYCoord) {\n    const diff = (size / 20) * 3\n    const x = offset.x - diff\n    const y = offset.y - diff\n    return { transform: `translate(${x}px, ${y}px)` }\n}\n","export * from './types'\nexport * from './state'\nexport { Field } from './Field'\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { RootState } from '../app'\nimport { deleteToken } from '../token'\n\nexport const NAME = 'view'\n\ninterface State {\n    panelVisible: boolean\n    selectedTokenId?: string\n}\n\nconst initialState: State = {\n    panelVisible: true,\n    selectedTokenId: undefined\n}\n\nconst slice = createSlice({\n    name: NAME,\n    initialState,\n    reducers: {\n\n        togglePanel(state) {\n            state.panelVisible = !state.panelVisible\n        },\n\n        selectToken(state, action: PayloadAction<{ id: string }>) {\n            const { id } = action.payload\n            state.selectedTokenId = id\n        },\n\n        deselectToken(state) {\n            state.selectedTokenId = undefined\n        }\n\n    },\n    extraReducers: (builder) => {\n\n        builder.addCase(deleteToken, (state, action) => {\n            const { id } = action.payload\n\n            if (state.selectedTokenId === id) {\n                state.selectedTokenId = undefined\n            }\n        })\n\n    }\n})\n\nexport const isPanelVisible = (state: RootState) => state[NAME].panelVisible\nexport const getSelectedTokenId = (state: RootState) => state[NAME].selectedTokenId\nexport const isTokenSelected = (state: RootState, id: string) => state[NAME].selectedTokenId === id\n\nexport const {\n    togglePanel,\n    selectToken,\n    deselectToken\n} = slice.actions\n\nexport const reducer = slice.reducer\n","import { ReactNode } from 'react'\nimport styles from './Toolbar.module.css'\n\ntype Props = {\n    children: ReactNode\n}\n\nexport function ToolbarGroup({ children }: Props) {\n    return (\n        <div className={styles.group}>\n            {children}\n        </div>\n    )\n}\n","import styles from './Toolbar.module.css'\n\ntype Props = {\n    label: string\n    disabled?: boolean\n    onClick: () => void\n}\n\n// TODO Icons statt Text\nexport function ToolbarButton({\n    label,\n    disabled,\n    onClick\n}: Props) {\n    return (\n        <button\n            className={styles.button}\n            onClick={onClick}\n            disabled={disabled}\n        >\n            {label}\n        </button>\n    )\n}\n","import { useCallback } from 'react'\nimport { useSelector, useDispatch } from '../../app'\nimport { deleteToken } from '../../token'\nimport { getSelectedTokenId } from '../../view'\nimport { ToolbarButton } from '../ToolbarButton'\n\nexport function DeleteTokenToolbarButton() {\n    const tokenId = useSelector((state) => getSelectedTokenId(state))\n    const disabled = !tokenId\n\n    const dispatch = useDispatch()\n    const onClick = useCallback(() => {\n        if (tokenId) {\n            dispatch(deleteToken({\n                id: tokenId\n            }))\n        }\n    }, [tokenId, dispatch])\n\n    return (\n        <ToolbarButton\n            label=\"Delete\"\n            disabled={disabled}\n            onClick={onClick}\n        />\n    )\n}\n","import { ToolbarGroup } from '../ToolbarGroup'\nimport { DeleteTokenToolbarButton } from './DeleteTokenToolbarButton'\n\nexport function TokenToolbarGroup() {\n    return (\n        <ToolbarGroup>\n            <DeleteTokenToolbarButton />\n        </ToolbarGroup>\n    )\n}\n","import { ActionCreators } from 'redux-undo'\nimport { useSelector, useDispatch, RootState } from '../../app'\nimport { ToolbarButton } from '../ToolbarButton'\n\nexport function UndoToolbarButton() {\n    const undoable = useSelector(isUndoable)\n    const disabled = !undoable\n\n    const dispatch = useDispatch()\n    const onClick = () => dispatch(ActionCreators.undo())\n\n    return (\n        <ToolbarButton\n            label=\"Undo\"\n            onClick={onClick}\n            disabled={disabled}\n        />\n    )\n}\n\nfunction isUndoable(state: RootState): boolean {\n    for (let value of Object.values(state)) {\n        const sub = value as any\n\n        if (sub && sub.past && sub.past.length > 0) {\n            return true\n        }\n    }\n\n    return false\n}\n","import { ActionCreators } from 'redux-undo'\nimport { useSelector, useDispatch, RootState } from '../../app'\nimport { ToolbarButton } from '../ToolbarButton'\n\nexport function RedoToolbarButton() {\n    const redoable = useSelector(isRedoable)\n    const disabled = !redoable\n\n    const dispatch = useDispatch()\n    const onClick = () => dispatch(ActionCreators.redo())\n\n    return (\n        <ToolbarButton\n            label=\"Redo\"\n            onClick={onClick}\n            disabled={disabled}\n        />\n    )\n}\n\nfunction isRedoable(state: RootState): boolean {\n    for (let value of Object.values(state)) {\n        const sub = value as any\n\n        if (sub && sub.future && sub.future.length > 0) {\n            return true\n        }\n    }\n\n    return false\n}\n","import { ToolbarGroup } from '../ToolbarGroup'\nimport { UndoToolbarButton } from './UndoToolbarButton'\nimport { RedoToolbarButton } from './RedoToolbarButton'\n\nexport function HistoryToolbarGroup() {\n    return (\n        <ToolbarGroup>\n            <UndoToolbarButton />\n            <RedoToolbarButton />\n        </ToolbarGroup>\n    )\n}\n","import { useDispatch } from '../../app'\nimport { togglePanel } from '../../view'\nimport { ToolbarButton } from '../ToolbarButton'\n\nexport function TogglePanelToolbarButton() {\n    const dispatch = useDispatch()\n    const onClick = () => dispatch(togglePanel())\n\n    return (\n        <ToolbarButton\n            label=\"Panel\"\n            onClick={onClick}\n        />\n    )\n}\n","import { ToolbarGroup } from '../ToolbarGroup'\nimport { TogglePanelToolbarButton } from './TogglePanelToolbarButton'\n\nexport function ViewToolbarGroup() {\n    return (\n        <ToolbarGroup>\n            <TogglePanelToolbarButton />\n        </ToolbarGroup>\n    )\n}\n","import { memo } from 'react'\nimport classNames from 'classnames'\nimport styles from './Toolbar.module.css'\nimport { TokenToolbarGroup } from './token'\nimport { HistoryToolbarGroup } from './history'\nimport { ViewToolbarGroup } from './view'\n\ntype Props = {\n    className?: string\n}\n\nexport const Toolbar = memo(({ className }: Props) => {\n    return (\n        <div className={classNames(styles.container, className)}>\n            <TokenToolbarGroup />\n            <HistoryToolbarGroup />\n            <ViewToolbarGroup />\n        </div>\n    )\n})\n","import { useState, useEffect, ChangeEvent } from 'react'\n\nexport const useInput = (\n    initialValue: any,\n    listener?: (value: any) => void\n): [any, any, (value: any) => void] => {\n    const [value, setValue] = useState(initialValue)\n\n    useEffect(() => setValue(initialValue), [initialValue])\n\n    const bind = {\n        value,\n        onChange: (event: ChangeEvent<any>) => {\n            setValue(event.target.value)\n            if (listener) {\n                listener(event.target.value)\n            }\n        }\n    }\n\n    return [\n        bind,\n        value,\n        setValue\n    ]\n}\n","import { useCallback, FocusEventHandler } from 'react'\nimport { useInput } from './use-input'\nimport styles from './Forms.module.css'\n\ntype Props = {\n    label?: string\n    max: number\n    value: string\n    onChange: (value: string) => void\n    onFocus: FocusEventHandler<any>\n}\n\nexport function TextField({\n    label,\n    max,\n    value,\n    onChange,\n    onFocus\n}: Props) {\n    const changeHandler = useChangeHandler(max, onChange)\n    const [bind] = useInput(value, changeHandler)\n\n    return (\n        <div className={styles.element}>\n            {label ? <label className={styles.label}>{label}</label> : null}\n            <input\n                className={styles.input}\n                type=\"text\"\n                maxLength={max}\n                onFocus={onFocus}\n                {...bind}\n            />\n        </div>\n    )\n}\n\nfunction useChangeHandler(\n    max: number,\n    onChange: (value: string) => void\n) {\n    return useCallback((value) => {\n        if (value.length <= max) {\n            onChange(value)\n        }\n    }, [max, onChange])\n}\n","import { useCallback, useMemo, CSSProperties } from 'react'\nimport { useInput } from './use-input'\nimport styles from './Forms.module.css'\n\ntype Option = {\n    value: string\n    label?: string\n    style?: CSSProperties\n}\n\ntype Props = {\n    label?: string\n    options: Option[] | any[]\n    value: string\n    onChange: (value: string) => void\n}\n\nexport function SelectField({\n    label,\n    options,\n    value,\n    onChange\n}: Props) {\n    const changeHandler = useChangeHandler(onChange)\n    const [bind, currentValue] = useInput(value, changeHandler)\n\n    const optionsNormalized = useOptions(options)\n    const selectStyle = useSelectStyle(currentValue, optionsNormalized)\n\n    return (\n        <div className={styles.element}>\n            {label ? <label className={styles.label}>{label}</label> : null}\n            <select\n                className={styles.select}\n                style={selectStyle}\n                {...bind}\n            >\n                {optionsNormalized.map(generateOption)}\n            </select>\n        </div>\n    )\n}\n\nfunction useChangeHandler(onChange: (value: string) => void) {\n    return useCallback((value) => {\n        if (onChange) {\n            onChange(value)\n        }\n    }, [onChange])\n}\n\nfunction useOptions(options: Option[] | string[]): Option[] {\n    return useMemo(\n        () => options.map(transformOption),\n        [options]\n    )\n}\n\nfunction transformOption(option: Option | string): Option {\n    let value = null\n    let label = null\n    let style = undefined\n\n    if (typeof option === 'object' && option !== null && option.value !== undefined) {\n        value = option.value\n        label = option.label\n        style = option.style\n    } else {\n        value = option + ''\n    }\n\n    if (label === null || label === undefined) {\n        label = value\n    }\n\n    return {\n        value,\n        label,\n        style\n    }\n}\n\nfunction useSelectStyle(currentValue: string, options: Option[]) {\n    return useMemo(\n        () => getSelectStyle(currentValue, options),\n        [currentValue, options]\n    )\n}\n\nfunction getSelectStyle(currentValue: string, options: Option[]) {\n    const option = options.find(option => option.value === currentValue)\n    return option ? option.style : null\n}\n\nfunction generateOption({ value, label, style }: Option) {\n    return (\n        <option\n            key={value}\n            className={styles.option}\n            value={value}\n            style={style}\n        >\n            {label}\n        </option>\n    )\n}\n","import { ReactNode } from 'react'\nimport styles from './Panel.module.css'\n\ntype Props = {\n    title: string,\n    children: ReactNode\n}\n\nexport function Panel({ title, children }: Props) {\n    return (\n        <div>\n            <h1 className={styles.title}>{title}</h1>\n            {children}\n        </div>\n    )\n}\n","import { ReactNode } from 'react'\nimport styles from './PanelCategory.module.css'\n\ntype Props = {\n    title?: string,\n    children: ReactNode\n}\n\nexport function PanelCategory({ title, children }: Props) {\n    return (\n        <div className={styles.container}>\n            {title ? <h2 className={styles.title}>{title}</h2> : null}\n            {children}\n        </div>\n    )\n}\n","import { useCallback } from 'react'\nimport range from 'lodash.range'\nimport { useSelector, useDispatch } from '../app'\nimport { SelectField } from '../forms'\nimport { getColumns, getRows, updateFieldDimensions, MIN_DIMENSIONS, MAX_DIMENSIONS } from '../field'\nimport { Panel } from './Panel'\nimport { PanelCategory } from './PanelCategory'\n\nexport function FieldPanel() {\n    return (\n        <Panel title=\"Field\">\n            <Dimensions />\n        </Panel>\n    )\n}\n\nfunction Dimensions() {\n    const dispatch = useDispatch()\n    const columns = useSelector(getColumns)\n    const rows = useSelector(getRows)\n\n    const columnsChanged = useCallback((columns) => {\n        dispatch(updateFieldDimensions({\n            columns,\n            rows\n        }))\n    }, [dispatch, rows])\n\n    const rowsChanged = useCallback((rows) => {\n        dispatch(updateFieldDimensions({\n            columns,\n            rows\n        }))\n    }, [dispatch, columns])\n\n    return (\n        <PanelCategory>\n            <DimensionSelect\n                label=\"Columns\"\n                value={columns}\n                onChange={columnsChanged}\n            />\n            <DimensionSelect\n                label=\"Rows\"\n                value={rows}\n                onChange={rowsChanged}\n            />\n        </PanelCategory>\n    )\n}\n\ntype DimensionSelectProps = {\n    label: string,\n    value: number,\n    onChange: (value: string) => void\n}\n\nfunction DimensionSelect({\n    label, \n    value,\n    onChange\n}: DimensionSelectProps) {\n    const options = range(MIN_DIMENSIONS, MAX_DIMENSIONS + 1)\n    return (\n        <SelectField\n            label={label}\n            options={options}\n            value={value + ''}\n            onChange={onChange}\n        />\n    )\n}\n","import { useCallback, FocusEvent } from 'react'\nimport { useSelector, useDispatch } from '../app'\nimport { findTokenById, updateToken } from '../token'\nimport { TextField } from '../forms'\n\ntype Props = {\n    id: string\n}\n\nexport function TokenSymbolField({ id }: Props) {\n    const symbol = useSelector(state => {\n        const symbol = findTokenById(state, id)?.symbol\n        return symbol ? symbol : ''\n    })\n\n    const dispatch = useDispatch()\n    const onChange = useCallback((symbol) => {\n        dispatch(updateToken({\n            id,\n            symbol\n        }))\n    }, [dispatch, id])\n\n    const onFocus = (event: FocusEvent<any>) => event.target.select()\n\n    return (\n        <TextField\n            label=\"Symbol\"\n            max={1}\n            value={symbol}\n            onChange={onChange}\n            onFocus={onFocus}\n        />\n    )\n}\n","import { useCallback } from 'react'\nimport { useSelector, useDispatch } from '../app'\nimport { findTokenById, updateToken } from '../token'\nimport { SelectField } from '../forms'\nimport { getTextColor } from '../shared'\n\nconst colors = [\n    createColor('Yellow', '#fff2cc'),\n    createColor('Red', '#f8cecc'),\n    createColor('Purple', '#d1c4e9'),\n    createColor('Blue', '#bbdefb'),\n    createColor('Green', '#d5e8d4'),\n    createColor('Grey', '#cfd8dc'),\n    createColor('Dark yellow', '#fdd835'),\n    createColor('Dark red', '#c62828'),\n    createColor('Dark purple', '#673ab7'),\n    createColor('Dark blue', '#1976d2'),\n    createColor('Dark green', '#2e7d32'),\n    createColor('Dark gray', '#647687')\n]\n\nfunction createColor(label: string, color: string) {\n    return {\n        label,\n        value: normalizeColor(color),\n        style: {\n            backgroundColor: color,\n            color: getTextColor(color)\n        }\n    }\n}\n\nfunction normalizeColor(color?: string) {\n    return color ? color.toLowerCase() : null\n}\n\ntype Props = {\n    id: string\n}\n\n// TODO Nicht bekannte Farbe als Option darstellen.\nexport function TokenColorSelection({ id }: Props) {\n    const color = useSelector(state => {\n        const color = findTokenById(state, id)?.color\n        return normalizeColor(color)\n    })\n\n    const dispatch = useDispatch()\n    const onChange = useCallback((color) => {\n        dispatch(updateToken({\n            id,\n            color\n        }))\n    }, [dispatch, id])\n\n    return color ? (\n        <SelectField\n            label=\"Color\"\n            options={colors}\n            value={color}\n            onChange={onChange}\n        />\n    ) : null\n}\n","import { useCallback } from 'react'\nimport { useSelector, useDispatch } from '../app'\nimport { Direction, findTokenById, updateToken } from '../token'\nimport { SelectField } from '../forms'\n\nconst directions = [\n    { label: '🡅 North', value: Direction.North },\n    { label: '🡆 East', value: Direction.East },\n    { label: '🡇 South', value: Direction.South },\n    { label: '🡄 West', value: Direction.West },\n    { label: 'None', value: Direction.None }\n]\n\ntype Props = {\n    id: string\n}\n\nexport function TokenDirectionSelection({ id }: Props) {\n    const direction = useSelector(state => {\n        const direction = findTokenById(state, id)?.direction\n        return direction ? direction : Direction.None\n    })\n\n    const dispatch = useDispatch()\n    const onChange = useCallback((direction) => {\n        dispatch(updateToken({\n            id,\n            direction\n        }))\n    }, [dispatch, id])\n\n    return (\n        <SelectField\n            label=\"Direction\"\n            options={directions}\n            value={direction}\n            onChange={onChange}\n        />\n    )\n}\n","import { Panel } from './Panel'\nimport { PanelCategory } from './PanelCategory'\nimport { TokenSymbolField } from './TokenSymbolField'\nimport { TokenColorSelection } from './TokenColorSelection'\nimport { TokenDirectionSelection } from './TokenDirectionSelection'\n\ntype Props = {\n    id: string\n}\n\nexport function TokenPanel({ id }: Props) {\n    return (\n        <Panel title=\"Token\">\n            <PanelCategory>\n                <TokenSymbolField id={id} />\n                <TokenColorSelection id={id} />\n                <TokenDirectionSelection id={id} />\n            </PanelCategory>\n        </Panel>\n    )\n}\n","import { memo } from 'react'\nimport { useSelector } from 'react-redux'\nimport classNames from 'classnames'\nimport { getSelectedTokenId } from '../view'\nimport { FieldPanel } from './FieldPanel'\nimport { TokenPanel } from './TokenPanel'\nimport styles from './PanelContainer.module.css'\n\ntype Prop = {\n    className?: string\n}\n\nexport const PanelContainer = memo(({ className }: Prop) => {\n    const selectedTokenId = useSelector(getSelectedTokenId)\n\n    return (\n        <div className={classNames(styles.container, className)}>\n            {selectedTokenId\n                ? <TokenPanel id={selectedTokenId} />\n                : <FieldPanel />\n            }\n        </div>\n    )\n})\n","import { useSelector as useSelectorRaw, useDispatch as useDispatchRaw } from 'react-redux'\nimport { configureStore } from '@reduxjs/toolkit'\nimport { NAME as tokens, reducer as tokensReducer } from '../token'\nimport { NAME as field, reducer as fieldReducer } from '../field'\nimport { NAME as view, reducer as viewReducer } from '../view'\n\nexport const store = configureStore({\n    reducer: {\n        [tokens]: tokensReducer,\n        [field]: fieldReducer,\n        [view]: viewReducer\n    }\n})\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type RootDispatch = typeof store.dispatch\n\nexport function useSelector<TState = RootState, TSelected = unknown>(\n    selector: (state: TState) => TSelected,\n    equalityFn?: (left: TSelected, right: TSelected) => boolean\n) : TSelected {\n    return useSelectorRaw(selector, equalityFn)\n}\n\nexport const useDispatch = () => useDispatchRaw<RootDispatch>()\n","import { CSSProperties } from 'react'\nimport { Toolbar } from '../toolbar'\nimport { Field } from '../field'\nimport { PanelContainer } from '../panel'\nimport { isPanelVisible } from '../view'\nimport { useSelector } from './store'\nimport styles from './Layout.module.css'\nimport './base.css'\n\nexport function Layout() {\n    const panel = useSelector(isPanelVisible)\n    const style = generateContainerStyle(panel)\n\n    return (\n        <div className={styles.container} style={style}>\n            <Toolbar className={styles.toolbar} />\n            <Field className={styles.field} />\n            {panel ? <PanelContainer className={styles.tokenPanel} /> : null}\n        </div>\n    )\n}\n\nfunction generateContainerStyle(panel: boolean): CSSProperties {\n    const fieldWidth = 'auto'\n    const panelWidth = panel ? '200px' : '0px'\n\n    return {\n        gridTemplateColumns: `${fieldWidth} ${panelWidth}`\n    }\n}\n","import { StrictMode } from 'react'\nimport { Provider } from 'react-redux'\nimport { ActionCreators } from 'redux-undo'\nimport { DndProvider } from '../dnd'\nimport { Layout } from './Layout'\nimport { store } from './store'\nimport { updateFieldDimensions, moveToken } from '../field'\nimport { createToken, Direction } from '../token'\n\nexport function App() {\n    return (\n        <StrictMode>\n            <Provider store={store}>\n                <DndProvider>\n                    <Layout />\n                </DndProvider>\n            </Provider>\n        </StrictMode>\n    )\n}\n\n// TODO Remove example data:\n\nstore.dispatch(updateFieldDimensions({\n    columns: 5,\n    rows: 5\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'T',\n    direction: Direction.West\n}))\n\nstore.dispatch(moveToken({\n    id: '0',\n    x: 3,\n    y: 4\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'E',\n    direction: Direction.South\n}))\n\nstore.dispatch(moveToken({\n    id: '1',\n    x: 1,\n    y: 0\n}))\n\nstore.dispatch(createToken({\n    color: '#F8CECC',\n    symbol: 'M',\n    direction: Direction.South\n}))\n\nstore.dispatch(moveToken({\n    id: '2',\n    x: 1,\n    y: 1\n}))\n\nstore.dispatch(createToken({\n    color: '#F8CECC',\n    symbol: 'M',\n    direction: Direction.South\n}))\n\nstore.dispatch(moveToken({\n    id: '3',\n    x: 2,\n    y: 2\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'Y',\n    direction: Direction.West\n}))\n\nstore.dispatch(moveToken({\n    id: '4',\n    x: 3,\n    y: 2\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'K',\n    direction: Direction.North\n}))\n\nstore.dispatch(moveToken({\n    id: '5',\n    x: 1,\n    y: 3\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '6',\n    x: 4,\n    y: 0\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '7',\n    x: 3,\n    y: 1\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '8',\n    x: 0,\n    y: 2\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '9',\n    x: 1,\n    y: 4\n}))\n\nstore.dispatch(ActionCreators.clearHistory())\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"element\":\"Forms_element__3Ktu0\",\"label\":\"Forms_label__9aoLd\",\"input\":\"Forms_input__34n01\",\"select\":\"Forms_select__32bDl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BaseToken_container__jdpcL\",\"circle\":\"BaseToken_circle__170NU\",\"direction\":\"BaseToken_direction__3CpQa\",\"selected\":\"BaseToken_selected__2gzaC\",\"current\":\"BaseToken_current__12_Yh\",\"north\":\"BaseToken_north__Nv6fV\",\"south\":\"BaseToken_south__3fbS4\",\"west\":\"BaseToken_west__3DAO8\",\"east\":\"BaseToken_east__28uYt\"};","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport undoable, { includeAction, groupByActionTypes } from 'redux-undo'\nimport { RootState } from '../app'\nimport { deleteToken } from '../token'\nimport { Cell } from './types'\n\nexport const MIN_DIMENSIONS = 1\nexport const MAX_DIMENSIONS = 100\n\ninterface State {\n    columns: number\n    rows: number,\n    cells: Cell[][]\n}\n\nconst initialState: State = {\n    columns: 1,\n    rows: 1,\n    cells: [ [ createCell(0, 0) ] ]\n}\n\nexport const NAME = 'field'\n\nconst slice = createSlice({\n    name: NAME,\n    initialState,\n    reducers: {\n\n        updateFieldDimensions(state, action: PayloadAction<{ columns: number, rows: number }>) {\n            const columns = normalizeDimension(action.payload.columns)\n            const rows = normalizeDimension(action.payload.rows)\n\n            // Columns\n\n            const columnsDiff = columns - state.columns\n\n            if (columnsDiff > 0) {\n                growColumns(state, columnsDiff)\n            } else if (columnsDiff < 0) {\n                shrinkColumns(state, Math.abs(columnsDiff))\n            }\n\n            state.columns = columns\n\n            // Rows\n\n            const rowsDiff = rows - state.rows\n\n            if (rowsDiff > 0) {\n                growRows(state, rowsDiff)\n            } else if (rowsDiff < 0) {\n                shrinkRows(state, Math.abs(rowsDiff))\n            }\n\n            state.rows = rows\n        },\n\n        moveToken(state, action: PayloadAction<{ id: string, x: number, y: number }>) {\n            const { id, x, y } = action.payload\n            removeToken(state, id)\n            state.cells[x][y].tokenId = id\n        }\n\n    },\n    extraReducers: (builder) => {\n\n        builder.addCase(deleteToken, (state, action) => {\n            const { id } = action.payload\n            removeToken(state, id)\n        })\n\n    }\n})\n\nfunction normalizeDimension(value: number) {\n    return Math.max(MIN_DIMENSIONS, Math.min(MAX_DIMENSIONS, value))\n}\n\nfunction createCell(x: number, y: number, tokenId?: string): Cell {\n    return {\n        x,\n        y,\n        tokenId\n    }\n}\n\nfunction growColumns(state: State, increase: number) {\n    const columnsStart = state.columns\n    const columnsEnd = state.columns + increase\n\n    for (let x = columnsStart; x < columnsEnd; x++) {\n        state.cells[x] = []\n\n        for (let y = 0; y < state.rows; y++) {\n            state.cells[x][y] = createCell(x, y)\n        }\n    }\n}\n\nfunction removeToken(state: State, id: string) {\n    for (let x = 0; x < state.columns; x++) {\n        for (let y = 0; y < state.rows; y++) {\n            const cell = state.cells[x][y]\n\n            if (cell.tokenId === id) {\n                cell.tokenId = undefined\n                break\n            }\n        }\n    }\n}\n\nfunction growRows(state: State, increase: number) {\n    const rowsStart = state.rows\n    const rowsEnd = state.rows + increase\n\n    for (let x = 0; x < state.columns; x++) {\n        for (let y = rowsStart; y < rowsEnd; y++) {\n            state.cells[x][y] = createCell(x, y)\n        }\n    }\n}\n\nfunction shrinkColumns(state: State, decrease: number) {\n    const columnsStart = state.columns - decrease\n    const columnsEnd = state.columns\n\n    for (let x = columnsStart; x < columnsEnd; x++) {\n        for (let y = 0; y < state.rows; y++) {\n            const tokenId = state.cells[x][y]\n            // TODO Delete Token\n            console.log('TODO Delete Token:', tokenId)\n        }\n    }\n\n    state.cells.splice(columnsStart, decrease)\n}\n\nfunction shrinkRows(state: State, decrease: number) {\n    const rowsStart = state.rows - decrease\n    const rowsEnd = state.rows\n\n    for (let x = 0; x < state.columns; x++) {\n        for (let y = rowsStart; y < rowsEnd; y++) {\n            const tokenId = state.cells[x][y]\n            // TODO Delete Token\n            console.log('TODO Delete Token:', tokenId)\n        }\n\n        state.cells[x].splice(rowsStart, decrease)\n    }\n}\n\nexport const getColumns = (state: RootState) => state[NAME].present.columns\nexport const getRows = (state: RootState) => state[NAME].present.rows\nexport const findCellByCoordinates = (state: RootState, x: number, y: number) => {\n    const column = state[NAME].present.cells[x]\n    return column ? column[y] : undefined\n}\n\nexport const {\n    updateFieldDimensions,\n    moveToken\n} = slice.actions\n\nexport const reducer = undoable(slice.reducer, {\n    filter: includeAction([\n        updateFieldDimensions.type,\n        moveToken.type\n    ]),\n    groupBy: groupByActionTypes([\n        updateFieldDimensions.type\n    ])\n})\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Toolbar_container__3wR26\",\"group\":\"Toolbar_group__38d8m\",\"button\":\"Toolbar_button__1im3b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"Cell_cell__fv93r\",\"firstRow\":\"Cell_firstRow__2E9oE\",\"lastColumn\":\"Cell_lastColumn__2WNNW\",\"droppable\":\"Cell_droppable__1P9wT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Layout_container__2El7r\",\"toolbar\":\"Layout_toolbar__37LM2\",\"field\":\"Layout_field__3DuOE\",\"tokenPanel\":\"Layout_tokenPanel__3M8Lg\"};","import { useDragLayer, XYCoord } from 'react-dnd'\nimport { TOKEN_DND_TYPE, DraggableTokenPreview } from '../token'\nimport styles from './CustomDragLayer.module.css'\n\nexport function CustomDragLayer() {\n    const {\n        item,\n        itemType,\n        currentOffset,\n        isDragging\n    } = useDragLayer(monitor => ({\n        item: monitor.getItem(),\n        itemType: monitor.getItemType(),\n        currentOffset: monitor.getSourceClientOffset(),\n        isDragging: monitor.isDragging()\n    }))\n\n    if (!isDragging || !currentOffset) {\n        return null\n    }\n    const preview = renderPreview(itemType, item, currentOffset)\n\n    if (!preview) {\n        return null\n    }\n\n    return (\n        <div className={styles.layer}>\n            {preview}\n        </div>\n    )\n}\n\nfunction renderPreview(type: any, item: any, offset: XYCoord) {\n    switch (type) {\n        case TOKEN_DND_TYPE:\n            return <DraggableTokenPreview offset={offset} {...item} />\n        default:\n            return null\n    }\n}\n","import { ReactNode } from 'react'\nimport { DndProvider as Provider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { CustomDragLayer } from './CustomDragLayer'\n\ntype Props = {\n    children: ReactNode\n}\n\n// TODO Aktuell kein TouchBackend mit \"enableMouseEvents: true\" weil:\n// Unterschied durch Touch-Backend zwischen Mouse und Touch:\n// Bei Mouse wird nach Drag die Selektierung von Tokens aufgehoben (durch Click-Event auf Grid).\nexport function DndProvider({ children }: Props) {\n    return (\n        <Provider backend={HTML5Backend}>\n            <CustomDragLayer />\n            {children}\n        </Provider>\n    )\n}\n","import { useEffect } from 'react'\nimport { ConnectDragPreview } from 'react-dnd'\n\nconst empty = new Image()\nempty.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='\n\nexport function useDisablePreview(preview: ConnectDragPreview) {\n    useEffect(() => {\n        preview(empty, { captureDraggingState: true })\n    }, [preview])\n}\n","import chroma from 'chroma-js'\n\nconst BLACK_TEXT = '#000000'\nconst WHITE_TEXT = '#FFFFFF'\n\nexport function getTextColor(color: string): string {\n    const blackText = chroma.contrast(BLACK_TEXT, color) >= chroma.contrast(WHITE_TEXT, color)\n    return blackText ? BLACK_TEXT : WHITE_TEXT\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"circle\":\"DraggableToken_circle__2e89C\",\"dragging\":\"DraggableToken_dragging__3643i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"field\":\"Field_field__1PltA\",\"gridWrapper\":\"Field_gridWrapper__oluTN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PanelCategory_container__2ywKt\",\"title\":\"PanelCategory_title__2RLOE\"};","import { CSSProperties, useCallback } from 'react'\nimport { useSelector, useDispatch, RootDispatch } from '../app'\nimport { DraggableToken, toggleTokenDirection } from '../token'\nimport { selectToken, deselectToken, isTokenSelected } from '../view'\n\ntype Props = {\n    id: string\n    size: number\n}\n\nexport function CellToken({\n    id,\n    size\n}: Props) {\n    const selected = useSelector((state) => isTokenSelected(state, id))\n\n    const dispatch = useDispatch()\n    const onTokenClick = useTokenClickHandler(selected, dispatch)\n    const onDirectionClick = useDirectionClickHandler(selected, dispatch)\n\n    const style = generateContainerStyle(size)\n\n    return (\n        <div style={style}>\n            <DraggableToken\n                id={id}\n                size={size}\n                onTokenClick={onTokenClick}\n                onDirectionClick={onDirectionClick}\n            />\n        </div>\n    )\n}\n\nfunction useTokenClickHandler(selected: boolean, dispatch: RootDispatch) {\n    return useCallback((id) => {\n        if (!selected) {\n            dispatch(selectToken({ id }))\n        } else {\n            dispatch(deselectToken())\n        }\n    }, [dispatch, selected])\n}\n\nfunction useDirectionClickHandler(selected: boolean, dispatch: RootDispatch) {\n    return useCallback((id, direction) => {\n        if (selected) {\n            dispatch(toggleTokenDirection({ id, direction }))\n        } else {\n            dispatch(selectToken({ id }))\n        }\n    }, [selected, dispatch])\n}\n\nfunction generateContainerStyle(size: number): CSSProperties {\n    const width = size + 'px'\n    const height = size + 'px'\n\n    return {\n        position: 'absolute',\n        left: '-1px',\n        top: '-1px',\n        width,\n        height\n    }\n}\n","import { CSSProperties } from 'react'\nimport { useDrop } from 'react-dnd'\nimport classNames from 'classnames'\nimport { useSelector, useDispatch } from '../app'\nimport { TokenDndItem, TOKEN_DND_TYPE } from '../token'\nimport { findCellByCoordinates, moveToken } from './state'\nimport { CellToken } from './CellToken'\nimport styles from './Cell.module.css'\n\ntype Props = {\n    x: number,\n    y: number,\n    size: number,\n    firstRow: boolean,\n    lastColumn: boolean\n}\n\nexport function Cell({\n    x,\n    y,\n    size,\n    firstRow,\n    lastColumn\n}: Props) {\n    const cell = useSelector((state) => findCellByCoordinates(state, x, y))\n    const tokenId = cell?.tokenId\n    const empty = tokenId === undefined\n\n    const [{ isOver, canDrop }, drop] = useDroppable(x, y, empty)\n\n    const className = classNames(\n        styles.cell,\n        {\n            [styles.firstRow]: firstRow,\n            [styles.lastColumn]: lastColumn,\n            [styles.droppable]: isOver && canDrop\n        }\n    )\n\n    const style = generateStyle(size)\n\n    return (\n        <div\n            ref={drop}\n            className={className}\n            style={style}\n        >\n            {tokenId ? <CellToken id={tokenId} size={size} /> : null}\n        </div>\n    )\n}\n\nfunction useDroppable(x: number, y: number, empty: boolean) {\n    const dispatch = useDispatch()\n\n    return useDrop(() => ({\n        accept: TOKEN_DND_TYPE,\n        canDrop: () => empty,\n        drop: (item: TokenDndItem) => dispatch(moveToken({ x, y, id: item.id })),\n        collect: (monitor) => ({\n            isOver: !!monitor.isOver(),\n            canDrop: !!monitor.canDrop()\n        })\n    }), [x, y, empty, dispatch])\n}\n\nfunction generateStyle(cellSize: number): CSSProperties {\n    const size = cellSize + 'px'\n    return {\n        width: size,\n        height: size\n    }\n}\n","import styles from './Grid.module.css'\nimport { useSelector } from '../app'\nimport { getColumns, getRows } from './state'\nimport { Cell } from './Cell'\n\ntype Props = {\n    cellSize: number\n}\n\nexport function Grid({ cellSize }: Props) {\n    const columns = useSelector(getColumns)\n    const rows = useSelector(getRows)\n\n    const style = generateGridStyle(columns, rows, cellSize)\n    const cells = generateCells(columns, rows, cellSize)\n\n    return (\n        <div className={styles.grid} style={style}>\n            {cells}\n        </div>\n    )\n}\n\nfunction generateGridStyle(columns: number, rows: number, cellSize: number) {\n    return {\n        width: (columns * cellSize) + 'px',\n        height: (rows * cellSize) + 'px'\n    }\n}\n\nfunction generateCells(columns: number, rows: number, cellSize: number) {\n    const cells = []\n\n    for (let y = 0; y < rows; y++) {\n        const firstRow = y === 0\n\n        for (let x = 0; x < columns; x++) {\n            const lastColumn = x === columns - 1\n\n            cells.push(\n                <Cell\n                    key={x + ';' + y}\n                    x={x}\n                    y={y}\n                    size={cellSize}\n                    firstRow={firstRow}\n                    lastColumn={lastColumn}\n                />\n            )\n        }\n    }\n\n    return cells\n}\n","import { memo } from 'react'\nimport classNames from 'classnames'\nimport { useDispatch } from '../app'\nimport { deselectToken } from '../view'\nimport { Grid } from './Grid'\nimport styles from './Field.module.css'\n\nconst BASE_CELL_SIZE = 100\n\ntype Prop = {\n    className?: string\n}\n\nexport const Field = memo(({ className }: Prop) => {\n    const dispatch = useDispatch()\n    const onDeselectToken = () => dispatch(deselectToken())\n\n    return (\n        <div className={classNames(styles.field, className)}>\n            <div\n                className={styles.gridWrapper}\n                onClick={onDeselectToken}\n            >\n                <Grid cellSize={BASE_CELL_SIZE} />\n            </div>\n        </div>\n    )\n})\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layer\":\"CustomDragLayer_layer__3Oi1J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"Grid_grid__5dSy0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Panel_title__2jCxg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PanelContainer_container__12MNC\"};","import ReactDOM from 'react-dom'\nimport { App } from './app'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}