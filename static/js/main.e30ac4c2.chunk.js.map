{"version":3,"sources":["token/types.ts","token/state.ts","token/BaseToken.tsx","token/DraggableToken.tsx","token/DraggableTokenPreview.tsx","field/index.ts","toolbar/ToolbarGroup.tsx","toolbar/ToolbarButton.tsx","toolbar/token/DeleteTokenToolbarButton.tsx","toolbar/token/TokenToolbarGroup.tsx","panel/state.ts","forms/use-input.ts","forms/TextField.tsx","forms/SelectField.tsx","panel/Panel.tsx","panel/PanelCategory.tsx","panel/FieldPanel.tsx","panel/TokenSymbolField.tsx","panel/TokenColorSelection.tsx","panel/TokenDirectionSelection.tsx","panel/TokenPanel.tsx","panel/PanelContainer.tsx","toolbar/view/TogglePanelToolbarButton.tsx","toolbar/view/ViewToolbarGroup.tsx","toolbar/Toolbar.tsx","app/store.ts","app/Layout.tsx","app/App.tsx","forms/Forms.module.css","token/BaseToken.module.css","field/state.ts","toolbar/Toolbar.module.css","field/Cell.module.css","app/Layout.module.css","dnd/CustomDragLayer.tsx","dnd/DndProvider.tsx","dnd/use-disable-preview.ts","shared/text.ts","token/DraggableToken.module.css","field/Field.module.css","panel/PanelCategory.module.css","field/CellToken.tsx","field/Cell.tsx","field/Grid.tsx","field/Field.tsx","dnd/CustomDragLayer.module.css","field/Grid.module.css","panel/Panel.module.css","panel/PanelContainer.module.css","index.tsx"],"names":["Direction","NAME","initialState","nextTokenId","ids","entities","selectedTokenId","undefined","state","createSlice","name","reducers","createToken","action","id","token","payload","push","updateToken","toggleTokenDirection","direction","None","deleteToken","index","indexOf","splice","selectToken","deselectToken","findTokenById","getSelectedTokenId","isTokenSelected","actions","BaseToken","size","onTokenClick","onDirectionClick","circleRef","containerClassName","circleClassName","selected","useSelector","symbol","color","onCircleClick","useCallback","event","stopPropagation","useCircleClick","onNorthClick","useDirectionClick","North","onSouthClick","South","onWestClick","West","onEastClick","East","colors","saturate","chroma","get","backgroundColor","borderColor","darken","hex","textColor","getTextColor","generateColors","containerStyle","width","height","generateContainerStyle","circleStyle","generateCircleStyle","northStyle","borderWidth","generateBorderWidth","top","left","generatePosition","borderLeftWidth","borderRightWidth","borderBottomWidth","borderBottomColor","generateNorthStyle","southStyle","bottom","borderTopWidth","borderTopColor","generateSouthStyle","westStyle","borderRightColor","generateWestStyle","eastStyle","right","borderLeftColor","generateEastStyle","containerClasses","classNames","styles","container","circleClasses","circle","className","style","ref","onClick","DirectionNode","currentDirection","north","south","west","east","current","TOKEN_DND_TYPE","DraggableToken","props","item","useDrag","type","collect","monitor","dragging","isDragging","drag","preview","useDisablePreview","DraggableTokenPreview","offset","diff","x","y","transform","generateStyle","ToolbarGroup","children","group","ToolbarButton","label","disabled","button","DeleteTokenToolbarButton","tokenId","dispatch","useDispatch","TokenToolbarGroup","visible","togglePanel","isPanelVisible","useInput","initialValue","listener","useState","value","setValue","useEffect","onChange","target","TextField","max","onFocus","changeHandler","length","useChangeHandler","bind","element","input","maxLength","SelectField","options","currentValue","optionsNormalized","useMemo","map","transformOption","useOptions","selectStyle","option","find","getSelectStyle","useSelectStyle","select","generateOption","Panel","title","PanelCategory","FieldPanel","Dimensions","columns","getColumns","rows","getRows","columnsChanged","updateFieldDimensions","rowsChanged","DimensionSelect","range","MIN_DIMENSIONS","MAX_DIMENSIONS","TokenSymbolField","createColor","normalizeColor","toLowerCase","TokenColorSelection","directions","TokenDirectionSelection","TokenPanel","PanelContainer","memo","TogglePanelToolbarButton","ViewToolbarGroup","Toolbar","store","configureStore","reducer","tokens","field","panel","selector","equalityFn","useSelectorRaw","useDispatchRaw","Layout","panelWidth","gridTemplateColumns","toolbar","tokenPanel","App","moveToken","module","exports","cells","createCell","normalizeDimension","columnsDiff","increase","columnsStart","columnsEnd","growColumns","decrease","console","log","shrinkColumns","Math","abs","rowsDiff","rowsStart","rowsEnd","growRows","shrinkRows","removeToken","extraReducers","builder","addCase","min","cell","findCellByCoordinates","column","CustomDragLayer","useDragLayer","getItem","itemType","getItemType","currentOffset","getSourceClientOffset","renderPreview","layer","DndProvider","backend","HTML5Backend","empty","Image","captureDraggingState","src","BLACK_TEXT","WHITE_TEXT","contrast","CellToken","useTokenClickHandler","useDirectionClickHandler","position","Cell","firstRow","lastColumn","useDrop","accept","canDrop","drop","isOver","useDroppable","droppable","cellSize","Grid","generateGridStyle","generateCells","grid","Field","gridWrapper","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e30ac4c2.chunk.js","sourcesContent":["export enum Direction {\n    North = 'north',\n    South = 'south',\n    West = 'west',\n    East = 'east',\n    None = 'none'\n}\n\nexport interface Token {\n    id: string\n    color: string\n    symbol: string\n    direction: Direction\n}\n\nexport interface TokenCreate {\n    color: string\n    symbol: string\n    direction: Direction\n}\n\nexport interface TokenUpdate {\n    id: string\n    color?: string\n    symbol?: string\n    direction?: Direction\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { RootState } from '../app'\nimport { Token, TokenCreate, TokenUpdate, Direction } from './types'\n\nconst NAME = 'tokens'\n\ninterface State {\n    nextTokenId: number\n    ids: string[]\n    entities: { [id: string]: Token }\n    selectedTokenId?: string\n}\n\nconst initialState: State = {\n    nextTokenId: 0,\n    ids: [],\n    entities: {},\n    selectedTokenId: undefined,\n}\n\nexport const state = createSlice({\n    name: NAME,\n    initialState,\n    reducers: {\n\n        createToken(state, action: PayloadAction<TokenCreate>) {\n            const id = (state.nextTokenId++) + ''\n            const token = { id, ...action.payload }\n            state.ids.push(id)\n            state.entities[id] = token\n        },\n\n        updateToken(state, action: PayloadAction<TokenUpdate>) {\n            const id = action.payload.id\n            const token = state.entities[id]\n\n            if (token) {\n                state.entities[id] = {\n                    ...token,\n                    ...action.payload\n                }\n            }\n        },\n\n        toggleTokenDirection(state, action: PayloadAction<{ id: string, direction: Direction }>) {\n            const { id, direction } = action.payload\n            const token = state.entities[id]\n\n            if (!token) {\n                return\n            }\n\n            if (token.direction !== direction) {\n                token.direction = direction\n            } else {\n                token.direction = Direction.None\n            }\n        },\n\n        deleteToken(state, action: PayloadAction<{ id: string }>) {\n            const { id } = action.payload\n            const index = state.ids.indexOf(id)\n\n            if (index > -1) {\n                state.ids.splice(index, 1)\n                delete state.entities[id]\n            }\n\n            if (state.selectedTokenId === id) {\n                state.selectedTokenId = undefined\n            }\n        },\n\n        selectToken(state, action: PayloadAction<{ id: string }>) {\n            const { id } = action.payload\n\n            if (state.entities[id]) {\n                state.selectedTokenId = id\n            }\n        },\n\n        deselectToken(state) {\n            state.selectedTokenId = undefined\n        }\n\n    }\n})\n\nexport const getTokenIds = (state: RootState) => state[NAME].ids\nexport const findTokenById = (state: RootState, id: string): Token | undefined => state[NAME].entities[id]\nexport const getSelectedTokenId = (state: RootState) => state[NAME].selectedTokenId\nexport const isTokenSelected = (state: RootState, id: string) => state[NAME].selectedTokenId === id\n\nexport const {\n    createToken,\n    updateToken,\n    toggleTokenDirection,\n    deleteToken,\n    selectToken,\n    deselectToken\n} = state.actions\n","import { useCallback, MouseEvent } from 'react'\nimport chroma from 'chroma-js'\nimport classNames from 'classnames'\nimport { useSelector } from '../app'\nimport { getTextColor } from '../shared'\nimport { findTokenById, getSelectedTokenId } from './state'\nimport { Direction } from './types'\nimport styles from './BaseToken.module.css'\n\ntype Props = {\n    id: string\n    size: number\n    onTokenClick?: (id: string) => void\n    onDirectionClick?: (id: string, direction: Direction) => void\n    circleRef?: any\n    containerClassName?: string\n    circleClassName?: string\n}\n\ntype DirectionProps = {\n    direction: Direction\n    currentDirection: Direction\n    onClick: (event: MouseEvent) => void\n    className: string\n    style: any\n}\n\nexport function BaseToken({\n    id,\n    size,\n    onTokenClick,\n    onDirectionClick,\n    circleRef,\n    containerClassName,\n    circleClassName\n}: Props) {\n    // State\n    const selected = useSelector(state => getSelectedTokenId(state) === id)\n    const token = useSelector(state => findTokenById(state, id))\n    const symbol = token ? token.symbol : ''\n    const color = token ? token.color : '#ffffff'\n    const direction = token ? token.direction : Direction.None\n\n    // Event handlers\n    const onCircleClick = useCircleClick(id, onTokenClick)\n    const onNorthClick = useDirectionClick(Direction.North, id, onDirectionClick)\n    const onSouthClick = useDirectionClick(Direction.South, id, onDirectionClick)\n    const onWestClick = useDirectionClick(Direction.West, id, onDirectionClick)\n    const onEastClick = useDirectionClick(Direction.East, id, onDirectionClick)\n\n    // Styling\n\n    const colors = generateColors(color)\n    const containerStyle = generateContainerStyle(size)\n    const circleStyle = generateCircleStyle(colors)\n    const northStyle = generateNorthStyle(size, colors)\n    const southStyle = generateSouthStyle(size, colors)\n    const westStyle = generateWestStyle(size, colors)\n    const eastStyle = generateEastStyle(size, colors)\n\n    const containerClasses = classNames(\n        styles.container,\n        { [styles.selected]: selected },\n        containerClassName\n    )\n\n    const circleClasses = classNames(\n        styles.circle,\n        circleClassName\n    )\n\n    // JSX\n\n    return (\n        <div\n            className={containerClasses}\n            style={containerStyle}\n        >\n\n            <div\n                ref={circleRef}\n                onClick={onCircleClick}\n                className={circleClasses}\n                style={circleStyle}\n            >\n                <span>{symbol}</span>\n            </div>\n\n            <DirectionNode\n                direction={Direction.North}\n                currentDirection={direction}\n                onClick={onNorthClick}\n                className={styles.north}\n                style={northStyle}\n            />\n\n            <DirectionNode\n                direction={Direction.South}\n                currentDirection={direction}\n                onClick={onSouthClick}\n                className={styles.south}\n                style={southStyle}\n            />\n\n            <DirectionNode\n                direction={Direction.West}\n                currentDirection={direction}\n                onClick={onWestClick}\n                className={styles.west}\n                style={westStyle}\n            />\n\n            <DirectionNode\n                direction={Direction.East}\n                currentDirection={direction}\n                onClick={onEastClick}\n                className={styles.east}\n                style={eastStyle}\n            />\n\n        </div>\n    )\n}\n\nfunction DirectionNode({\n    direction,\n    currentDirection,\n    onClick,\n    className,\n    style\n}: DirectionProps) {\n    const current = direction === currentDirection\n    return (\n        <div\n            onClick={onClick}\n            className={classNames(className, styles.direction, { [styles.current]: current })}\n            style={style}\n        />\n    )\n}\n\n// Event handlers\n\nfunction useCircleClick(\n    id: string,\n    onTokenClick?: (id: string) => void\n) {\n    return useCallback((event) => {\n        if (onTokenClick) {\n            event.stopPropagation()\n            onTokenClick(id)\n        }\n    }, [id, onTokenClick])\n}\n\nfunction useDirectionClick(\n    direction: Direction, id: string,\n    onDirectionClick?: (id: string, direction: Direction) => void\n) {\n    return useCallback((event) => {\n        if (onDirectionClick) {\n            event.stopPropagation()\n            onDirectionClick(id, direction)\n        }\n    }, [direction, id, onDirectionClick])\n}\n\n// Styling\n\ntype Colors = {\n    backgroundColor: string\n    borderColor: string\n    textColor: string\n}\n\nfunction generateColors(color: string): Colors {\n    const chromaticity = chroma(color).get('lch.c')\n    const saturate = chromaticity > 10 ? 2 : 0\n\n    return {\n        backgroundColor: color,\n        borderColor: chroma(color).darken(2).saturate(saturate).hex(),\n        textColor: getTextColor(color)\n    }\n}\n\nfunction generateContainerStyle(size: number) {\n    return {\n        width: size + 'px',\n        height: size + 'px'\n    }\n}\n\nfunction generateCircleStyle(colors: Colors) {\n    return {\n        backgroundColor: colors.backgroundColor,\n        borderColor: colors.borderColor,\n        color: colors.textColor\n    }\n}\n\nfunction generateNorthStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        top: 0,\n        left: generatePosition(size),\n        borderLeftWidth: borderWidth,\n        borderRightWidth: borderWidth,\n        borderBottomWidth: borderWidth,\n        borderBottomColor: colors.borderColor\n    }\n}\n\nfunction generateSouthStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        bottom: 0,\n        left: generatePosition(size),\n        borderLeftWidth: borderWidth,\n        borderRightWidth: borderWidth,\n        borderTopWidth: borderWidth,\n        borderTopColor: colors.borderColor\n    }\n}\n\nfunction generateWestStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        top: generatePosition(size),\n        left: 0,\n        borderTopWidth: borderWidth,\n        borderBottomWidth: borderWidth,\n        borderRightWidth: borderWidth,\n        borderRightColor: colors.borderColor\n    }\n}\n\nfunction generateEastStyle(size: number, colors: Colors) {\n    const borderWidth = generateBorderWidth(size)\n    return {\n        top: generatePosition(size),\n        right: 0,\n        borderTopWidth: borderWidth,\n        borderBottomWidth: borderWidth,\n        borderLeftWidth: borderWidth,\n        borderLeftColor: colors.borderColor\n    }\n}\n\nfunction generateBorderWidth(size: number) {\n    return ((size / 10) * 3) + 'px'\n}\n\nfunction generatePosition(size: number) {\n    return (size / 5) + 'px'\n}\n","import { useDrag } from 'react-dnd'\nimport classNames from 'classnames'\nimport { useDisablePreview } from '../dnd'\nimport { BaseToken } from './BaseToken'\nimport { Direction } from './types'\nimport styles from './DraggableToken.module.css'\n\ntype Props = {\n    id: string\n    size: number\n    onTokenClick?: (id: string) => void\n    onDirectionClick?: (id: string, direction: Direction) => void\n}\n\nexport const TOKEN_DND_TYPE = 'Token'\n\nexport interface TokenDndItem {\n    id: string\n    size: number\n}\n\nexport function DraggableToken(props: Props) {\n    const { id, size } = props\n\n    const item: TokenDndItem = { id, size }\n\n    const [{ dragging }, drag, preview] = useDrag(() => ({\n        type: TOKEN_DND_TYPE,\n        item,\n        collect: (monitor) => ({ dragging: !!monitor.isDragging() })\n    }), [id, size])\n\n    useDisablePreview(preview)\n\n    const containerClassName = classNames({\n        [styles.dragging]: dragging\n    })\n\n    return (\n        <BaseToken\n            {...props}\n            circleRef={drag}\n            containerClassName={containerClassName}\n            circleClassName={styles.circle}\n        />\n    )\n}\n","import { XYCoord } from 'react-dnd'\nimport { BaseToken } from './BaseToken'\n\ntype Props = {\n    id: string\n    size: number\n    offset: XYCoord\n}\n\nexport function DraggableTokenPreview({\n    id,\n    size,\n    offset\n}: Props) {\n    const style = generateStyle(size, offset)\n    return (\n        <div style={style}>\n            <BaseToken\n                id={id}\n                size={size}\n            />\n        </div>\n    )\n}\n\nfunction generateStyle(size: number, offset: XYCoord) {\n    const diff = (size / 20) * 3\n    const x = offset.x - diff\n    const y = offset.y - diff\n    return { transform: `translate(${x}px, ${y}px)` }\n}\n","export * from './types'\nexport * from './state'\nexport { Field } from './Field'\n","import { ReactNode } from 'react'\nimport styles from './Toolbar.module.css'\n\ntype Props = {\n    children: ReactNode\n}\n\nexport function ToolbarGroup({ children }: Props) {\n    return (\n        <div className={styles.group}>\n            {children}\n        </div>\n    )\n}\n","import styles from './Toolbar.module.css'\n\ntype Props = {\n    label: string\n    disabled?: boolean\n    onClick: () => void\n}\n\n// TODO Icons statt Text\nexport function ToolbarButton({\n    label,\n    disabled,\n    onClick\n}: Props) {\n    return (\n        <button\n            className={styles.button}\n            onClick={onClick}\n            disabled={disabled}\n        >\n            {label}\n        </button>\n    )\n}\n","import { useCallback } from 'react'\nimport { useSelector, useDispatch } from '../../app'\nimport { getSelectedTokenId, deleteToken } from '../../token'\nimport { ToolbarButton } from '../ToolbarButton'\n\nexport function DeleteTokenToolbarButton() {\n    const tokenId = useSelector((state) => getSelectedTokenId(state))\n    const disabled = !tokenId\n\n    const dispatch = useDispatch()\n    const onClick = useCallback(() => {\n        if (tokenId) {\n            dispatch(deleteToken({\n                id: tokenId\n            }))\n        }\n    }, [tokenId, dispatch])\n\n    return (\n        <ToolbarButton\n            label=\"Delete\"\n            disabled={disabled}\n            onClick={onClick}\n        />\n    )\n}\n","import { ToolbarGroup } from '../ToolbarGroup'\nimport { DeleteTokenToolbarButton } from './DeleteTokenToolbarButton'\n\nexport function TokenToolbarGroup() {\n    return (\n        <ToolbarGroup>\n            <DeleteTokenToolbarButton />\n        </ToolbarGroup>\n    )\n}\n","import { createSlice } from '@reduxjs/toolkit'\nimport { RootState } from '../app'\n\nconst NAME = 'panel'\n\ninterface State {\n    visible: boolean\n}\n\nconst initialState: State = {\n    visible: true\n}\n\nexport const state = createSlice({\n    name: NAME,\n    initialState,\n    reducers: {\n\n        togglePanel(state) {\n            state.visible = !state.visible\n        }\n\n    }\n})\n\nexport const isPanelVisible = (state: RootState) => state[NAME].visible\n\nexport const { togglePanel } = state.actions\n","import { useState, useEffect, ChangeEvent } from 'react'\n\nexport const useInput = (\n    initialValue: any,\n    listener?: (value: any) => void\n): [any, any, (value: any) => void] => {\n    const [value, setValue] = useState(initialValue)\n\n    useEffect(() => setValue(initialValue), [initialValue])\n\n    const bind = {\n        value,\n        onChange: (event: ChangeEvent<any>) => {\n            setValue(event.target.value)\n            if (listener) {\n                listener(event.target.value)\n            }\n        }\n    }\n\n    return [\n        bind,\n        value,\n        setValue\n    ]\n}\n","import { useCallback, FocusEventHandler } from 'react'\nimport { useInput } from './use-input'\nimport styles from './Forms.module.css'\n\ntype Props = {\n    label?: string\n    max: number\n    value: string\n    onChange: (value: string) => void\n    onFocus: FocusEventHandler<any>\n}\n\nexport function TextField({\n    label,\n    max,\n    value,\n    onChange,\n    onFocus\n}: Props) {\n    const changeHandler = useChangeHandler(max, onChange)\n    const [bind] = useInput(value, changeHandler)\n\n    return (\n        <div className={styles.element}>\n            {label ? <label className={styles.label}>{label}</label> : null}\n            <input\n                className={styles.input}\n                type=\"text\"\n                maxLength={max}\n                onFocus={onFocus}\n                {...bind}\n            />\n        </div>\n    )\n}\n\nfunction useChangeHandler(\n    max: number,\n    onChange: (value: string) => void\n) {\n    return useCallback((value) => {\n        if (value.length <= max) {\n            onChange(value)\n        }\n    }, [max, onChange])\n}\n","import { useCallback, useMemo, CSSProperties } from 'react'\nimport { useInput } from './use-input'\nimport styles from './Forms.module.css'\n\ntype Option = {\n    value: string\n    label?: string\n    style?: CSSProperties\n}\n\ntype Props = {\n    label?: string\n    options: Option[] | any[]\n    value: string\n    onChange: (value: string) => void\n}\n\nexport function SelectField({\n    label,\n    options,\n    value,\n    onChange\n}: Props) {\n    const changeHandler = useChangeHandler(onChange)\n    const [bind, currentValue] = useInput(value, changeHandler)\n\n    const optionsNormalized = useOptions(options)\n    const selectStyle = useSelectStyle(currentValue, optionsNormalized)\n\n    return (\n        <div className={styles.element}>\n            {label ? <label className={styles.label}>{label}</label> : null}\n            <select\n                className={styles.select}\n                style={selectStyle}\n                {...bind}\n            >\n                {optionsNormalized.map(generateOption)}\n            </select>\n        </div>\n    )\n}\n\nfunction useChangeHandler(onChange: (value: string) => void) {\n    return useCallback((value) => {\n        if (onChange) {\n            onChange(value)\n        }\n    }, [onChange])\n}\n\nfunction useOptions(options: Option[] | string[]): Option[] {\n    return useMemo(\n        () => options.map(transformOption),\n        [options]\n    )\n}\n\nfunction transformOption(option: Option | string): Option {\n    let value = null\n    let label = null\n    let style = undefined\n\n    if (typeof option === 'object' && option !== null && option.value !== undefined) {\n        value = option.value\n        label = option.label\n        style = option.style\n    } else {\n        value = option + ''\n    }\n\n    if (label === null || label === undefined) {\n        label = value\n    }\n\n    return {\n        value,\n        label,\n        style\n    }\n}\n\nfunction useSelectStyle(currentValue: string, options: Option[]) {\n    return useMemo(\n        () => getSelectStyle(currentValue, options),\n        [currentValue, options]\n    )\n}\n\nfunction getSelectStyle(currentValue: string, options: Option[]) {\n    const option = options.find(option => option.value === currentValue)\n    return option ? option.style : null\n}\n\nfunction generateOption({ value, label, style }: Option) {\n    return (\n        <option\n            key={value}\n            className={styles.option}\n            value={value}\n            style={style}\n        >\n            {label}\n        </option>\n    )\n}\n","import { ReactNode } from 'react'\nimport styles from './Panel.module.css'\n\ntype Props = {\n    title: string,\n    children: ReactNode\n}\n\nexport function Panel({ title, children }: Props) {\n    return (\n        <div>\n            <h1 className={styles.title}>{title}</h1>\n            {children}\n        </div>\n    )\n}\n","import { ReactNode } from 'react'\nimport styles from './PanelCategory.module.css'\n\ntype Props = {\n    title?: string,\n    children: ReactNode\n}\n\nexport function PanelCategory({ title, children }: Props) {\n    return (\n        <div className={styles.container}>\n            {title ? <h2 className={styles.title}>{title}</h2> : null}\n            {children}\n        </div>\n    )\n}\n","import { useCallback } from 'react'\nimport range from 'lodash.range'\nimport { useSelector, useDispatch } from '../app'\nimport { SelectField } from '../forms'\nimport { getColumns, getRows, updateFieldDimensions, MIN_DIMENSIONS, MAX_DIMENSIONS } from '../field'\nimport { Panel } from './Panel'\nimport { PanelCategory } from './PanelCategory'\n\nexport function FieldPanel() {\n    return (\n        <Panel title=\"Field\">\n            <Dimensions />\n        </Panel>\n    )\n}\n\nfunction Dimensions() {\n    const dispatch = useDispatch()\n    const columns = useSelector(getColumns)\n    const rows = useSelector(getRows)\n\n    const columnsChanged = useCallback((columns) => {\n        dispatch(updateFieldDimensions({\n            columns,\n            rows\n        }))\n    }, [dispatch, rows])\n\n    const rowsChanged = useCallback((rows) => {\n        dispatch(updateFieldDimensions({\n            columns,\n            rows\n        }))\n    }, [dispatch, columns])\n\n    return (\n        <PanelCategory>\n            <DimensionSelect\n                label=\"Columns\"\n                value={columns}\n                onChange={columnsChanged}\n            />\n            <DimensionSelect\n                label=\"Rows\"\n                value={rows}\n                onChange={rowsChanged}\n            />\n        </PanelCategory>\n    )\n}\n\ntype DimensionSelectProps = {\n    label: string,\n    value: number,\n    onChange: (value: string) => void\n}\n\nfunction DimensionSelect({\n    label, \n    value,\n    onChange\n}: DimensionSelectProps) {\n    const options = range(MIN_DIMENSIONS, MAX_DIMENSIONS + 1)\n    return (\n        <SelectField\n            label={label}\n            options={options}\n            value={value + ''}\n            onChange={onChange}\n        />\n    )\n}\n","import { useCallback, FocusEvent } from 'react'\nimport { useSelector, useDispatch } from '../app'\nimport { findTokenById, updateToken } from '../token'\nimport { TextField } from '../forms'\n\ntype Props = {\n    id: string\n}\n\nexport function TokenSymbolField({ id }: Props) {\n    const symbol = useSelector(state => {\n        const symbol = findTokenById(state, id)?.symbol\n        return symbol ? symbol : ''\n    })\n\n    const dispatch = useDispatch()\n    const onChange = useCallback((symbol) => {\n        dispatch(updateToken({\n            id,\n            symbol\n        }))\n    }, [dispatch, id])\n\n    const onFocus = (event: FocusEvent<any>) => event.target.select()\n\n    return (\n        <TextField\n            label=\"Symbol\"\n            max={1}\n            value={symbol}\n            onChange={onChange}\n            onFocus={onFocus}\n        />\n    )\n}\n","import { useCallback } from 'react'\nimport { useSelector, useDispatch } from '../app'\nimport { findTokenById, updateToken } from '../token'\nimport { SelectField } from '../forms'\nimport { getTextColor } from '../shared'\n\nconst colors = [\n    createColor('Yellow', '#fff2cc'),\n    createColor('Red', '#f8cecc'),\n    createColor('Purple', '#d1c4e9'),\n    createColor('Blue', '#bbdefb'),\n    createColor('Green', '#d5e8d4'),\n    createColor('Grey', '#cfd8dc'),\n    createColor('Dark yellow', '#fdd835'),\n    createColor('Dark red', '#c62828'),\n    createColor('Dark purple', '#673ab7'),\n    createColor('Dark blue', '#1976d2'),\n    createColor('Dark green', '#2e7d32'),\n    createColor('Dark gray', '#647687')\n]\n\nfunction createColor(label: string, color: string) {\n    return {\n        label,\n        value: normalizeColor(color),\n        style: {\n            backgroundColor: color,\n            color: getTextColor(color)\n        }\n    }\n}\n\nfunction normalizeColor(color?: string) {\n    return color ? color.toLowerCase() : null\n}\n\ntype Props = {\n    id: string\n}\n\n// TODO Nicht bekannte Farbe als Option darstellen.\nexport function TokenColorSelection({ id }: Props) {\n    const color = useSelector(state => {\n        const color = findTokenById(state, id)?.color\n        return normalizeColor(color)\n    })\n\n    const dispatch = useDispatch()\n    const onChange = useCallback((color) => {\n        dispatch(updateToken({\n            id,\n            color\n        }))\n    }, [dispatch, id])\n\n    return color ? (\n        <SelectField\n            label=\"Color\"\n            options={colors}\n            value={color}\n            onChange={onChange}\n        />\n    ) : null\n}\n","import { useCallback } from 'react'\nimport { useSelector, useDispatch } from '../app'\nimport { Direction, findTokenById, updateToken } from '../token'\nimport { SelectField } from '../forms'\n\nconst directions = [\n    { label: '🡅 North', value: Direction.North },\n    { label: '🡆 East', value: Direction.East },\n    { label: '🡇 South', value: Direction.South },\n    { label: '🡄 West', value: Direction.West },\n    { label: 'None', value: Direction.None }\n]\n\ntype Props = {\n    id: string\n}\n\nexport function TokenDirectionSelection({ id }: Props) {\n    const direction = useSelector(state => {\n        const direction = findTokenById(state, id)?.direction\n        return direction ? direction : Direction.None\n    })\n\n    const dispatch = useDispatch()\n    const onChange = useCallback((direction) => {\n        dispatch(updateToken({\n            id,\n            direction\n        }))\n    }, [dispatch, id])\n\n    return (\n        <SelectField\n            label=\"Direction\"\n            options={directions}\n            value={direction}\n            onChange={onChange}\n        />\n    )\n}\n","import { Panel } from './Panel'\nimport { PanelCategory } from './PanelCategory'\nimport { TokenSymbolField } from './TokenSymbolField'\nimport { TokenColorSelection } from './TokenColorSelection'\nimport { TokenDirectionSelection } from './TokenDirectionSelection'\n\ntype Props = {\n    id: string\n}\n\nexport function TokenPanel({ id }: Props) {\n    return (\n        <Panel title=\"Token\">\n            <PanelCategory>\n                <TokenSymbolField id={id} />\n                <TokenColorSelection id={id} />\n                <TokenDirectionSelection id={id} />\n            </PanelCategory>\n        </Panel>\n    )\n}\n","import { memo } from 'react'\nimport { useSelector } from 'react-redux'\nimport classNames from 'classnames'\nimport { getSelectedTokenId } from '../token'\nimport { FieldPanel } from './FieldPanel'\nimport { TokenPanel } from './TokenPanel'\nimport styles from './PanelContainer.module.css'\n\ntype Prop = {\n    className?: string\n}\n\nexport const PanelContainer = memo(({ className }: Prop) => {\n    const selectedTokenId = useSelector(getSelectedTokenId)\n\n    return (\n        <div className={classNames(styles.container, className)}>\n            {selectedTokenId\n                ? <TokenPanel id={selectedTokenId} />\n                : <FieldPanel />\n            }\n        </div>\n    )\n})\n","import { useDispatch } from '../../app'\nimport { togglePanel } from '../../panel'\nimport { ToolbarButton } from '../ToolbarButton'\n\nexport function TogglePanelToolbarButton() {\n    const dispatch = useDispatch()\n    const onClick = () => dispatch(togglePanel())\n\n    return (\n        <ToolbarButton\n            label=\"Panel\"\n            onClick={onClick}\n        />\n    )\n}\n","import { ToolbarGroup } from '../ToolbarGroup'\nimport { TogglePanelToolbarButton } from './TogglePanelToolbarButton'\n\nexport function ViewToolbarGroup() {\n    return (\n        <ToolbarGroup>\n            <TogglePanelToolbarButton />\n        </ToolbarGroup>\n    )\n}\n","import { memo } from 'react'\nimport classNames from 'classnames'\nimport styles from './Toolbar.module.css'\nimport { TokenToolbarGroup } from './token'\nimport { ViewToolbarGroup } from './view'\n\ntype Props = {\n    className?: string\n}\n\nexport const Toolbar = memo(({ className }: Props) => {\n    return (\n        <div className={classNames(styles.container, className)}>\n            <TokenToolbarGroup />\n            <ViewToolbarGroup />\n        </div>\n    )\n})\n","import { useSelector as useSelectorRaw, useDispatch as useDispatchRaw } from 'react-redux'\nimport { configureStore } from '@reduxjs/toolkit'\nimport { state as tokens } from '../token'\nimport { state as field } from '../field'\nimport { state as panel } from '../panel'\n\nexport const store = configureStore({\n    reducer: {\n        [tokens.name]: tokens.reducer,\n        [field.name]: field.reducer,\n        [panel.name]: panel.reducer\n    }\n})\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type RootDispatch = typeof store.dispatch\n\nexport function useSelector<TState = RootState, TSelected = unknown>(\n    selector: (state: TState) => TSelected,\n    equalityFn?: (left: TSelected, right: TSelected) => boolean\n) : TSelected {\n    return useSelectorRaw(selector, equalityFn)\n}\n\nexport const useDispatch = () => useDispatchRaw<RootDispatch>()\n","import { CSSProperties } from 'react'\nimport { Toolbar } from '../toolbar'\nimport { Field } from '../field'\nimport { PanelContainer, isPanelVisible } from '../panel'\nimport { useSelector } from './store'\nimport styles from './Layout.module.css'\nimport './base.css'\n\nexport function Layout() {\n    const panel = useSelector(isPanelVisible)\n    const style = generateContainerStyle(panel)\n\n    return (\n        <div className={styles.container} style={style}>\n            <Toolbar className={styles.toolbar} />\n            <Field className={styles.field} />\n            {panel ? <PanelContainer className={styles.tokenPanel} /> : null}\n        </div>\n    )\n}\n\nfunction generateContainerStyle(panel: boolean): CSSProperties {\n    const fieldWidth = 'auto'\n    const panelWidth = panel ? '200px' : '0px'\n\n    return {\n        gridTemplateColumns: `${fieldWidth} ${panelWidth}`\n    }\n}\n","import { StrictMode } from 'react'\nimport { Provider } from 'react-redux'\nimport { DndProvider } from '../dnd'\nimport { Layout } from './Layout'\nimport { store } from './store'\nimport { updateFieldDimensions, moveToken } from '../field'\nimport { createToken, Direction } from '../token'\n\nexport function App() {\n    return (\n        <StrictMode>\n            <Provider store={store}>\n                <DndProvider>\n                    <Layout />\n                </DndProvider>\n            </Provider>\n        </StrictMode>\n    )\n}\n\n// TODO Remove example data:\n\nstore.dispatch(updateFieldDimensions({\n    columns: 5,\n    rows: 5\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'T',\n    direction: Direction.West\n}))\n\nstore.dispatch(moveToken({\n    id: '0',\n    x: 3,\n    y: 4\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'E',\n    direction: Direction.South\n}))\n\nstore.dispatch(moveToken({\n    id: '1',\n    x: 1,\n    y: 0\n}))\n\nstore.dispatch(createToken({\n    color: '#F8CECC',\n    symbol: 'M',\n    direction: Direction.South\n}))\n\nstore.dispatch(moveToken({\n    id: '2',\n    x: 1,\n    y: 1\n}))\n\nstore.dispatch(createToken({\n    color: '#F8CECC',\n    symbol: 'M',\n    direction: Direction.South\n}))\n\nstore.dispatch(moveToken({\n    id: '3',\n    x: 2,\n    y: 2\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'Y',\n    direction: Direction.West\n}))\n\nstore.dispatch(moveToken({\n    id: '4',\n    x: 3,\n    y: 2\n}))\n\nstore.dispatch(createToken({\n    color: '#D5E8D4',\n    symbol: 'K',\n    direction: Direction.North\n}))\n\nstore.dispatch(moveToken({\n    id: '5',\n    x: 1,\n    y: 3\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '6',\n    x: 4,\n    y: 0\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '7',\n    x: 3,\n    y: 1\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '8',\n    x: 0,\n    y: 2\n}))\n\nstore.dispatch(createToken({\n    color: '#647687',\n    symbol: '',\n    direction: Direction.None\n}))\n\nstore.dispatch(moveToken({\n    id: '9',\n    x: 1,\n    y: 4\n}))\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"element\":\"Forms_element__3Ktu0\",\"label\":\"Forms_label__9aoLd\",\"input\":\"Forms_input__34n01\",\"select\":\"Forms_select__32bDl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BaseToken_container__jdpcL\",\"circle\":\"BaseToken_circle__170NU\",\"direction\":\"BaseToken_direction__3CpQa\",\"selected\":\"BaseToken_selected__2gzaC\",\"current\":\"BaseToken_current__12_Yh\",\"north\":\"BaseToken_north__Nv6fV\",\"south\":\"BaseToken_south__3fbS4\",\"west\":\"BaseToken_west__3DAO8\",\"east\":\"BaseToken_east__28uYt\"};","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { RootState } from '../app'\nimport { deleteToken } from '../token'\nimport { Cell } from './types'\n\nexport const MIN_DIMENSIONS = 1\nexport const MAX_DIMENSIONS = 100\n\ninterface State {\n    columns: number\n    rows: number,\n    cells: Cell[][]\n}\n\nconst initialState: State = {\n    columns: 1,\n    rows: 1,\n    cells: [ [ createCell(0, 0) ] ]\n}\n\nconst NAME = 'field'\n\nexport const state = createSlice({\n    name: NAME,\n    initialState,\n    reducers: {\n\n        updateFieldDimensions(state, action: PayloadAction<{ columns: number, rows: number }>) {\n            const columns = normalizeDimension(action.payload.columns)\n            const rows = normalizeDimension(action.payload.rows)\n\n            // Columns\n\n            const columnsDiff = columns - state.columns\n\n            if (columnsDiff > 0) {\n                growColumns(state, columnsDiff)\n            } else if (columnsDiff < 0) {\n                shrinkColumns(state, Math.abs(columnsDiff))\n            }\n\n            state.columns = columns\n\n            // Rows\n\n            const rowsDiff = rows - state.rows\n\n            if (rowsDiff > 0) {\n                growRows(state, rowsDiff)\n            } else if (rowsDiff < 0) {\n                shrinkRows(state, Math.abs(rowsDiff))\n            }\n\n            state.rows = rows\n        },\n\n        moveToken(state, action: PayloadAction<{ id: string, x: number, y: number }>) {\n            const { id, x, y } = action.payload\n            removeToken(state, id)\n            state.cells[x][y].tokenId = id\n        }\n\n    },\n    extraReducers: (builder) => {\n\n        builder.addCase(deleteToken, (state, action) => {\n            const { id } = action.payload\n            removeToken(state, id)\n        })\n\n    }\n})\n\nfunction normalizeDimension(value: number) {\n    return Math.max(MIN_DIMENSIONS, Math.min(MAX_DIMENSIONS, value))\n}\n\nfunction createCell(x: number, y: number, tokenId?: string): Cell {\n    return {\n        x,\n        y,\n        tokenId\n    }\n}\n\nfunction growColumns(state: State, increase: number) {\n    const columnsStart = state.columns\n    const columnsEnd = state.columns + increase\n\n    for (let x = columnsStart; x < columnsEnd; x++) {\n        state.cells[x] = []\n\n        for (let y = 0; y < state.rows; y++) {\n            state.cells[x][y] = createCell(x, y)\n        }\n    }\n}\n\nfunction removeToken(state: State, id: string) {\n    for (let x = 0; x < state.columns; x++) {\n        for (let y = 0; y < state.rows; y++) {\n            const cell = state.cells[x][y]\n\n            if (cell.tokenId === id) {\n                cell.tokenId = undefined\n                break\n            }\n        }\n    }\n}\n\nfunction growRows(state: State, increase: number) {\n    const rowsStart = state.rows\n    const rowsEnd = state.rows + increase\n\n    for (let x = 0; x < state.columns; x++) {\n        for (let y = rowsStart; y < rowsEnd; y++) {\n            state.cells[x][y] = createCell(x, y)\n        }\n    }\n}\n\nfunction shrinkColumns(state: State, decrease: number) {\n    const columnsStart = state.columns - decrease\n    const columnsEnd = state.columns\n\n    for (let x = columnsStart; x < columnsEnd; x++) {\n        for (let y = 0; y < state.rows; y++) {\n            const tokenId = state.cells[x][y]\n            // TODO Delete Token\n            console.log('TODO Delete Token:', tokenId)\n        }\n    }\n\n    state.cells.splice(columnsStart, decrease)\n}\n\nfunction shrinkRows(state: State, decrease: number) {\n    const rowsStart = state.rows - decrease\n    const rowsEnd = state.rows\n\n    for (let x = 0; x < state.columns; x++) {\n        for (let y = rowsStart; y < rowsEnd; y++) {\n            const tokenId = state.cells[x][y]\n            // TODO Delete Token\n            console.log('TODO Delete Token:', tokenId)\n        }\n\n        state.cells[x].splice(rowsStart, decrease)\n    }\n}\n\nexport const getColumns = (state: RootState) => state[NAME].columns\nexport const getRows = (state: RootState) => state[NAME].rows\nexport const findCellByCoordinates = (state: RootState, x: number, y: number) => {\n    const column = state[NAME].cells[x]\n    return column ? column[y] : undefined\n}\n\nexport const {\n    updateFieldDimensions,\n    moveToken\n} = state.actions\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Toolbar_container__3wR26\",\"group\":\"Toolbar_group__38d8m\",\"button\":\"Toolbar_button__1im3b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"Cell_cell__fv93r\",\"firstRow\":\"Cell_firstRow__2E9oE\",\"lastColumn\":\"Cell_lastColumn__2WNNW\",\"droppable\":\"Cell_droppable__1P9wT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Layout_container__2El7r\",\"toolbar\":\"Layout_toolbar__37LM2\",\"field\":\"Layout_field__3DuOE\",\"tokenPanel\":\"Layout_tokenPanel__3M8Lg\"};","import { useDragLayer, XYCoord } from 'react-dnd'\nimport { TOKEN_DND_TYPE, DraggableTokenPreview } from '../token'\nimport styles from './CustomDragLayer.module.css'\n\nexport function CustomDragLayer() {\n    const {\n        item,\n        itemType,\n        currentOffset,\n        isDragging\n    } = useDragLayer(monitor => ({\n        item: monitor.getItem(),\n        itemType: monitor.getItemType(),\n        currentOffset: monitor.getSourceClientOffset(),\n        isDragging: monitor.isDragging()\n    }))\n\n    if (!isDragging || !currentOffset) {\n        return null\n    }\n    const preview = renderPreview(itemType, item, currentOffset)\n\n    if (!preview) {\n        return null\n    }\n\n    return (\n        <div className={styles.layer}>\n            {preview}\n        </div>\n    )\n}\n\nfunction renderPreview(type: any, item: any, offset: XYCoord) {\n    switch (type) {\n        case TOKEN_DND_TYPE:\n            return <DraggableTokenPreview offset={offset} {...item} />\n        default:\n            return null\n    }\n}\n","import { ReactNode } from 'react'\nimport { DndProvider as Provider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { CustomDragLayer } from './CustomDragLayer'\n\ntype Props = {\n    children: ReactNode\n}\n\n// TODO Aktuell kein TouchBackend mit \"enableMouseEvents: true\" weil:\n// Unterschied durch Touch-Backend zwischen Mouse und Touch:\n// Bei Mouse wird nach Drag die Selektierung von Tokens aufgehoben (durch Click-Event auf Grid).\nexport function DndProvider({ children }: Props) {\n    return (\n        <Provider backend={HTML5Backend}>\n            <CustomDragLayer />\n            {children}\n        </Provider>\n    )\n}\n","import { useEffect } from 'react'\nimport { ConnectDragPreview } from 'react-dnd'\n\nconst empty = new Image()\nempty.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='\n\nexport function useDisablePreview(preview: ConnectDragPreview) {\n    useEffect(() => {\n        preview(empty, { captureDraggingState: true })\n    }, [preview])\n}\n","import chroma from 'chroma-js'\n\nconst BLACK_TEXT = '#000000'\nconst WHITE_TEXT = '#FFFFFF'\n\nexport function getTextColor(color: string): string {\n    const blackText = chroma.contrast(BLACK_TEXT, color) >= chroma.contrast(WHITE_TEXT, color)\n    return blackText ? BLACK_TEXT : WHITE_TEXT\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"circle\":\"DraggableToken_circle__2e89C\",\"dragging\":\"DraggableToken_dragging__3643i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"field\":\"Field_field__1PltA\",\"gridWrapper\":\"Field_gridWrapper__oluTN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PanelCategory_container__2ywKt\",\"title\":\"PanelCategory_title__2RLOE\"};","import { CSSProperties, useCallback } from 'react'\nimport { useSelector, useDispatch, RootDispatch } from '../app'\nimport { DraggableToken, selectToken, deselectToken, toggleTokenDirection, isTokenSelected } from '../token'\n\ntype Props = {\n    id: string\n    size: number\n}\n\nexport function CellToken({\n    id,\n    size\n}: Props) {\n    const selected = useSelector((state) => isTokenSelected(state, id))\n\n    const dispatch = useDispatch()\n    const onTokenClick = useTokenClickHandler(selected, dispatch)\n    const onDirectionClick = useDirectionClickHandler(selected, dispatch)\n\n    const style = generateContainerStyle(size)\n\n    return (\n        <div style={style}>\n            <DraggableToken\n                id={id}\n                size={size}\n                onTokenClick={onTokenClick}\n                onDirectionClick={onDirectionClick}\n            />\n        </div>\n    )\n}\n\nfunction useTokenClickHandler(selected: boolean, dispatch: RootDispatch) {\n    return useCallback((id) => {\n        if (!selected) {\n            dispatch(selectToken({ id }))\n        } else {\n            dispatch(deselectToken())\n        }\n    }, [dispatch, selected])\n}\n\nfunction useDirectionClickHandler(selected: boolean, dispatch: RootDispatch) {\n    return useCallback((id, direction) => {\n        if (selected) {\n            dispatch(toggleTokenDirection({ id, direction }))\n        } else {\n            dispatch(selectToken({ id }))\n        }\n    }, [selected, dispatch])\n}\n\nfunction generateContainerStyle(size: number): CSSProperties {\n    const width = size + 'px'\n    const height = size + 'px'\n\n    return {\n        position: 'absolute',\n        left: '-1px',\n        top: '-1px',\n        width,\n        height\n    }\n}\n","import { CSSProperties } from 'react'\nimport { useDrop } from 'react-dnd'\nimport classNames from 'classnames'\nimport { useSelector, useDispatch } from '../app'\nimport { TokenDndItem, TOKEN_DND_TYPE } from '../token'\nimport { findCellByCoordinates, moveToken } from './state'\nimport { CellToken } from './CellToken'\nimport styles from './Cell.module.css'\n\ntype Props = {\n    x: number,\n    y: number,\n    size: number,\n    firstRow: boolean,\n    lastColumn: boolean\n}\n\nexport function Cell({\n    x,\n    y,\n    size,\n    firstRow,\n    lastColumn\n}: Props) {\n    const cell = useSelector((state) => findCellByCoordinates(state, x, y))\n    const tokenId = cell?.tokenId\n    const empty = tokenId === undefined\n\n    const [{ isOver, canDrop }, drop] = useDroppable(x, y, empty)\n\n    const className = classNames(\n        styles.cell,\n        {\n            [styles.firstRow]: firstRow,\n            [styles.lastColumn]: lastColumn,\n            [styles.droppable]: isOver && canDrop\n        }\n    )\n\n    const style = generateStyle(size)\n\n    return (\n        <div\n            ref={drop}\n            className={className}\n            style={style}\n        >\n            {tokenId ? <CellToken id={tokenId} size={size} /> : null}\n        </div>\n    )\n}\n\nfunction useDroppable(x: number, y: number, empty: boolean) {\n    const dispatch = useDispatch()\n\n    return useDrop(() => ({\n        accept: TOKEN_DND_TYPE,\n        canDrop: () => empty,\n        drop: (item: TokenDndItem) => dispatch(moveToken({ x, y, id: item.id })),\n        collect: (monitor) => ({\n            isOver: !!monitor.isOver(),\n            canDrop: !!monitor.canDrop()\n        })\n    }), [x, y, empty, dispatch])\n}\n\nfunction generateStyle(cellSize: number): CSSProperties {\n    const size = cellSize + 'px'\n    return {\n        width: size,\n        height: size\n    }\n}\n","import styles from './Grid.module.css'\nimport { useSelector } from '../app'\nimport { getColumns, getRows } from './state'\nimport { Cell } from './Cell'\n\ntype Props = {\n    cellSize: number\n}\n\nexport function Grid({ cellSize }: Props) {\n    const columns = useSelector(getColumns)\n    const rows = useSelector(getRows)\n\n    const style = generateGridStyle(columns, rows, cellSize)\n    const cells = generateCells(columns, rows, cellSize)\n\n    return (\n        <div className={styles.grid} style={style}>\n            {cells}\n        </div>\n    )\n}\n\nfunction generateGridStyle(columns: number, rows: number, cellSize: number) {\n    return {\n        width: (columns * cellSize) + 'px',\n        height: (rows * cellSize) + 'px'\n    }\n}\n\nfunction generateCells(columns: number, rows: number, cellSize: number) {\n    const cells = []\n\n    for (let y = 0; y < rows; y++) {\n        const firstRow = y === 0\n\n        for (let x = 0; x < columns; x++) {\n            const lastColumn = x === columns - 1\n\n            cells.push(\n                <Cell\n                    key={x + ';' + y}\n                    x={x}\n                    y={y}\n                    size={cellSize}\n                    firstRow={firstRow}\n                    lastColumn={lastColumn}\n                />\n            )\n        }\n    }\n\n    return cells\n}\n","import { memo } from 'react'\nimport classNames from 'classnames'\nimport { useDispatch } from '../app'\nimport { deselectToken } from '../token'\nimport { Grid } from './Grid'\nimport styles from './Field.module.css'\n\nconst BASE_CELL_SIZE = 100\n\ntype Prop = {\n    className?: string\n}\n\nexport const Field = memo(({ className }: Prop) => {\n    const dispatch = useDispatch()\n    const onDeselectToken = () => dispatch(deselectToken())\n\n    return (\n        <div className={classNames(styles.field, className)}>\n            <div\n                className={styles.gridWrapper}\n                onClick={onDeselectToken}\n            >\n                <Grid cellSize={BASE_CELL_SIZE} />\n            </div>\n        </div>\n    )\n})\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layer\":\"CustomDragLayer_layer__3Oi1J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"Grid_grid__5dSy0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Panel_title__2jCxg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PanelContainer_container__12MNC\"};","import ReactDOM from 'react-dom'\nimport { App } from './app'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}